<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{admin/layout :: layout(nqtTitle='C·∫•u h√¨nh Website')}">

<body>
    <div th:fragment="content">
        <div class="flex items-center justify-between mb-6 border-b pb-4">
            <h1 class="text-2xl font-semibold text-gray-800">C·∫•u h√¨nh Website</h1>
        </div>

        <!-- Navigation Tabs -->
        <div class="bg-gray-700 rounded-lg p-2 mb-6">
            <div class="flex flex-wrap gap-2">
                <button type="button" onclick="showTab('general')" id="tab-general"
                    class="px-4 py-2 rounded-md font-medium transition-all bg-white text-gray-800 shadow-sm">
                    TH√îNG TIN CHUNG
                </button>
                <button type="button" onclick="showTab('smtp')" id="tab-smtp"
                    class="px-4 py-2 rounded-md font-medium transition-all text-white hover:bg-gray-600">
                    SMTP EMAIL
                </button>
                <button type="button" onclick="showTab('vip')" id="tab-vip"
                    class="px-4 py-2 rounded-md font-medium transition-all text-white hover:bg-gray-600">
                    CHI·∫æT KH·∫§U VIP
                </button>
                <button type="button" onclick="showTab('support')" id="tab-support"
                    class="px-4 py-2 rounded-md font-medium transition-all text-white hover:bg-gray-600">
                    LINK H·ªñ TR·ª¢
                </button>
                <button type="button" onclick="showTab('ratelimit')" id="tab-ratelimit"
                    class="px-4 py-2 rounded-md font-medium transition-all text-white hover:bg-gray-600">
                    RATE LIMITING & BRUTE FORCE
                </button>
                <button type="button" onclick="showTab('security')" id="tab-security"
                    class="px-4 py-2 rounded-md font-medium transition-all text-white hover:bg-gray-600">
                    B·∫¢O M·∫¨T
                </button>
                <button type="button" onclick="showTab('banner')" id="tab-banner"
                    class="px-4 py-2 rounded-md font-medium transition-all text-white hover:bg-gray-600">
                    BANNER
                </button>
                <button type="button" onclick="showTab('popup')" id="tab-popup"
                    class="px-4 py-2 rounded-md font-medium transition-all text-white hover:bg-gray-600">
                    POPUP TRANG CH·ª¶
                </button>
            </div>
        </div>

        <form th:action="${nqtAdminPath} + '/setting'" method="post" enctype="multipart/form-data" autocomplete="off"
            class="bg-white shadow-md rounded-lg p-6 max-w-4xl">
            <!-- Hidden fields to prevent browser autocomplete -->
            <input type="text" style="position: absolute; left: -9999px;" tabindex="-1" autocomplete="chrome-off">
            <input type="email" style="position: absolute; left: -9999px;" tabindex="-1" autocomplete="chrome-off">
            <input type="password" style="position: absolute; left: -9999px;" tabindex="-1" autocomplete="new-password">
            
            <!-- Tab: TH√îNG TIN CHUNG -->
            <div id="content-general" class="tab-content">
                <div class="mb-4">
                    <label for="nqtWebsiteName" class="block text-sm font-medium text-gray-700 mb-1">T√™n Website</label>
                    <input type="text" autocomplete="chrome-off"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all"
                        id="nqtWebsiteName" name="nqtWebsiteName" th:value="${nqtWebsiteName}">
                </div>
                <div class="mb-4">
                    <label for="nqtTieuDe" class="block text-sm font-medium text-gray-700 mb-1">Ti√™u ƒë·ªÅ</label>
                    <input type="text" autocomplete="chrome-off"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all"
                        id="nqtTieuDe" name="nqtTieuDe" th:value="${nqtTieuDe}">
                </div>
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-1">Logo Website</label>
                    <div class="flex items-center space-x-4">
                        <div th:if="${nqtWebsiteLogo != null && nqtWebsiteLogo != ''}"
                            class="w-16 h-16 border rounded p-1 flex items-center justify-center">
                            <img th:src="${nqtWebsiteLogo}" alt="Logo" class="max-w-full max-h-full object-contain">
                        </div>
                        <input type="file" name="nqtWebsiteLogoFile" accept="image/*" autocomplete="chrome-off"
                            class="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100">
                    </div>
                </div>
                <div class="mb-6">
                    <label for="nqtWebsiteColor" class="block text-sm font-medium text-gray-700 mb-1">M√†u ch·ªß ƒë·∫°o</label>
                    <div class="flex items-center space-x-2">
                        <input type="color" autocomplete="chrome-off" class="h-10 w-20 p-1 border border-gray-300 rounded cursor-pointer"
                            id="nqtWebsiteColor" name="nqtWebsiteColor" th:value="${nqtWebsiteColor}"
                            title="Ch·ªçn m√†u ch·ªß ƒë·∫°o">
                        <span class="text-sm text-gray-500">Ch·ªçn m√†u s·∫Øc cho thanh b√™n v√† c√°c ƒëi·ªÉm nh·∫•n</span>
                    </div>
                </div>
                <div class="mb-6">
                    <label for="nqtWebsiteFont" class="block text-sm font-medium text-gray-700 mb-1">Font ch·ªØ</label>
                    <select id="nqtWebsiteFont" name="nqtWebsiteFont" autocomplete="chrome-off"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all">
                        <option value="Nunito" th:selected="${nqtWebsiteFont == 'Nunito'}">Nunito (M·∫∑c ƒë·ªãnh)</option>
                        <option value="Roboto" th:selected="${nqtWebsiteFont == 'Roboto'}">Roboto</option>
                        <option value="Open Sans" th:selected="${nqtWebsiteFont == 'Open Sans'}">Open Sans</option>
                        <option value="Montserrat" th:selected="${nqtWebsiteFont == 'Montserrat'}">Montserrat</option>
                        <option value="Inter" th:selected="${nqtWebsiteFont == 'Inter'}">Inter</option>
                        <option value="Poppins" th:selected="${nqtWebsiteFont == 'Poppins'}">Poppins</option>
                        <option value="Lato" th:selected="${nqtWebsiteFont == 'Lato'}">Lato</option>
                        <option value="Raleway" th:selected="${nqtWebsiteFont == 'Raleway'}">Raleway</option>
                        <option value="Ubuntu" th:selected="${nqtWebsiteFont == 'Ubuntu'}">Ubuntu</option>
                        <option value="Playfair Display" th:selected="${nqtWebsiteFont == 'Playfair Display'}">Playfair
                            Display (Serif)</option>
                        <option value="Lora" th:selected="${nqtWebsiteFont == 'Lora'}">Lora (Serif)</option>
                        <option value="Merriweather" th:selected="${nqtWebsiteFont == 'Merriweather'}">Merriweather (Serif)
                        </option>
                    </select>
                    <p class="mt-1 text-xs text-gray-500">Font ch·ªØ cho trang Admin</p>
                </div>
                
                <!-- Customer Font Settings -->
                <div class="mb-6 border-t pt-4">
                    <h4 class="text-md font-semibold text-gray-700 mb-3">Font ch·ªØ Trang Kh√°ch</h4>
                    
                    <div class="mb-4">
                        <label for="nqtCustomerFontBody" class="block text-sm font-medium text-gray-700 mb-1">
                            Font ch·ªØ Body (N·ªôi dung ch√≠nh)
                        </label>
                        <select id="nqtCustomerFontBody" name="nqtCustomerFontBody" autocomplete="chrome-off"
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all">
                            <option value="" th:selected="${nqtCustomerFontBody == null or nqtCustomerFontBody == ''}">D√πng font Admin (M·∫∑c ƒë·ªãnh)</option>
                            <option value="Inter" th:selected="${nqtCustomerFontBody == 'Inter'}">Inter</option>
                            <option value="Roboto" th:selected="${nqtCustomerFontBody == 'Roboto'}">Roboto</option>
                            <option value="Open Sans" th:selected="${nqtCustomerFontBody == 'Open Sans'}">Open Sans</option>
                            <option value="Montserrat" th:selected="${nqtCustomerFontBody == 'Montserrat'}">Montserrat</option>
                            <option value="Poppins" th:selected="${nqtCustomerFontBody == 'Poppins'}">Poppins</option>
                            <option value="Lato" th:selected="${nqtCustomerFontBody == 'Lato'}">Lato</option>
                            <option value="Raleway" th:selected="${nqtCustomerFontBody == 'Raleway'}">Raleway</option>
                            <option value="Ubuntu" th:selected="${nqtCustomerFontBody == 'Ubuntu'}">Ubuntu</option>
                            <option value="Nunito" th:selected="${nqtCustomerFontBody == 'Nunito'}">Nunito</option>
                        </select>
                        <p class="mt-1 text-xs text-gray-500">Font ch·ªØ cho n·ªôi dung ch√≠nh, ƒëo·∫°n vƒÉn, m√¥ t·∫£ tr√™n trang kh√°ch</p>
                    </div>
                    
                    <div class="mb-4">
                        <label for="nqtCustomerFontHeading" class="block text-sm font-medium text-gray-700 mb-1">
                            Font ch·ªØ Heading (Ti√™u ƒë·ªÅ)
                        </label>
                        <select id="nqtCustomerFontHeading" name="nqtCustomerFontHeading" autocomplete="chrome-off"
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all">
                            <option value="Playfair Display" th:selected="${nqtCustomerFontHeading == 'Playfair Display'}">Playfair Display (M·∫∑c ƒë·ªãnh)</option>
                            <option value="Lora" th:selected="${nqtCustomerFontHeading == 'Lora'}">Lora</option>
                            <option value="Merriweather" th:selected="${nqtCustomerFontHeading == 'Merriweather'}">Merriweather</option>
                            <option value="Cormorant Garamond" th:selected="${nqtCustomerFontHeading == 'Cormorant Garamond'}">Cormorant Garamond</option>
                            <option value="Cinzel" th:selected="${nqtCustomerFontHeading == 'Cinzel'}">Cinzel</option>
                            <option value="Inter" th:selected="${nqtCustomerFontHeading == 'Inter'}">Inter</option>
                            <option value="Montserrat" th:selected="${nqtCustomerFontHeading == 'Montserrat'}">Montserrat</option>
                            <option value="Poppins" th:selected="${nqtCustomerFontHeading == 'Poppins'}">Poppins</option>
                            <option value="Roboto" th:selected="${nqtCustomerFontHeading == 'Roboto'}">Roboto</option>
                        </select>
                        <p class="mt-1 text-xs text-gray-500">Font ch·ªØ cho c√°c ti√™u ƒë·ªÅ (h1, h2, h3...) tr√™n trang kh√°ch</p>
                    </div>
                    
                    <div class="mb-4">
                        <label for="nqtCustomerFontSerif" class="block text-sm font-medium text-gray-700 mb-1">
                            Font ch·ªØ Serif (ƒê·∫∑c bi·ªát)
                        </label>
                        <select id="nqtCustomerFontSerif" name="nqtCustomerFontSerif" autocomplete="chrome-off"
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all">
                            <option value="Playfair Display" th:selected="${nqtCustomerFontSerif == 'Playfair Display'}">Playfair Display (M·∫∑c ƒë·ªãnh)</option>
                            <option value="Lora" th:selected="${nqtCustomerFontSerif == 'Lora'}">Lora</option>
                            <option value="Merriweather" th:selected="${nqtCustomerFontSerif == 'Merriweather'}">Merriweather</option>
                            <option value="Cormorant Garamond" th:selected="${nqtCustomerFontSerif == 'Cormorant Garamond'}">Cormorant Garamond</option>
                            <option value="Cinzel" th:selected="${nqtCustomerFontSerif == 'Cinzel'}">Cinzel</option>
                            <option value="PT Serif" th:selected="${nqtCustomerFontSerif == 'PT Serif'}">PT Serif</option>
                        </select>
                        <p class="mt-1 text-xs text-gray-500">Font ch·ªØ serif cho c√°c ph·∫ßn ƒë·∫∑c bi·ªát, highlight tr√™n trang kh√°ch</p>
                    </div>
                </div>
                
                <div class="mb-4">
                    <label for="nqtWebsiteAddress" class="block text-sm font-medium text-gray-700 mb-1">ƒê·ªãa ch·ªâ</label>
                    <input type="text" autocomplete="chrome-off"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all"
                        id="nqtWebsiteAddress" name="nqtWebsiteAddress" th:value="${nqtWebsiteAddress}">
                </div>
                <div class="mb-4">
                    <label for="nqtWebsitePhone" class="block text-sm font-medium text-gray-700 mb-1">S·ªë ƒëi·ªán tho·∫°i</label>
                    <input type="text" autocomplete="chrome-off"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all"
                        id="nqtWebsitePhone" name="nqtWebsitePhone" th:value="${nqtWebsitePhone}">
                </div>
                <div class="mb-4">
                    <label for="nqtWebsiteEmail" class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                    <input type="email" autocomplete="chrome-off"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all"
                        id="nqtWebsiteEmail" name="nqtWebsiteEmail" th:value="${nqtWebsiteEmail}">
                </div>
                <div class="mb-4">
                    <label for="nqtWebsiteFacebook" class="block text-sm font-medium text-gray-700 mb-1">Link Facebook</label>
                    <input type="url" autocomplete="chrome-off"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all"
                        id="nqtWebsiteFacebook" name="nqtWebsiteFacebook" th:value="${nqtWebsiteFacebook}" placeholder="https://facebook.com/...">
                </div>
                <div class="mb-4">
                    <label for="nqtWebsiteZalo" class="block text-sm font-medium text-gray-700 mb-1">Link Zalo</label>
                    <input type="url" autocomplete="chrome-off"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all"
                        id="nqtWebsiteZalo" name="nqtWebsiteZalo" th:value="${nqtWebsiteZalo}" placeholder="https://zalo.me/...">
                </div>
                <div class="mb-4">
                    <label for="nqtWebsiteLink" class="block text-sm font-medium text-gray-700 mb-1">Link Website</label>
                    <input type="url" autocomplete="chrome-off"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all"
                        id="nqtWebsiteLink" name="nqtWebsiteLink" th:value="${nqtWebsiteLink}" placeholder="https://...">
                </div>
                <div class="mb-4">
                    <label for="nqtWebsiteFAQ" class="block text-sm font-medium text-gray-700 mb-1">Link FAQ</label>
                    <input type="url" autocomplete="chrome-off"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all"
                        id="nqtWebsiteFAQ" name="nqtWebsiteFAQ" th:value="${nqtWebsiteFAQ}" placeholder="https://... ho·∫∑c /faq">
                </div>
            </div>

            <!-- Tab: SMTP EMAIL -->
            <div id="content-smtp" class="tab-content hidden">
                <h3 class="text-lg font-semibold text-gray-800 mb-4">C·∫•u h√¨nh SMTP Email (Gmail)</h3>
                <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4">
                    <p class="text-sm text-blue-800 mb-2"><strong>H∆∞·ªõng d·∫´n c·∫•u h√¨nh Gmail:</strong></p>
                    <ol class="list-decimal list-inside text-sm text-blue-700 space-y-1">
                        <li>Truy c·∫≠p <a href="https://myaccount.google.com/apppasswords" target="_blank" class="underline">Google App Passwords</a></li>
                        <li>T·∫°o App Password m·ªõi (n·∫øu ch∆∞a b·∫≠t 2-Step Verification, c·∫ßn b·∫≠t tr∆∞·ªõc)</li>
                        <li>S·ª≠ d·ª•ng App Password (16 k√Ω t·ª±) thay v√¨ m·∫≠t kh·∫©u Gmail th√¥ng th∆∞·ªùng</li>
                        <li>ƒêi·ªÅn th√¥ng tin b√™n d∆∞·ªõi v√† nh·∫•n "L∆∞u c·∫•u h√¨nh"</li>
                    </ol>
                </div>

                <div class="mb-4">
                    <label for="nqtSmtpHost" class="block text-sm font-medium text-gray-700 mb-1">SMTP Host</label>
                    <input type="text" autocomplete="chrome-off"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all"
                        id="nqtSmtpHost" name="nqtSmtpHost" th:value="${nqtSmtpHost ?: 'smtp.gmail.com'}" placeholder="smtp.gmail.com">
                    <p class="mt-1 text-xs text-gray-500">Gmail: smtp.gmail.com</p>
                </div>

                <div class="mb-4">
                    <label for="nqtSmtpPort" class="block text-sm font-medium text-gray-700 mb-1">SMTP Port</label>
                    <input type="number" autocomplete="chrome-off"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all"
                        id="nqtSmtpPort" name="nqtSmtpPort" th:value="${nqtSmtpPort ?: '587'}" placeholder="587">
                    <p class="mt-1 text-xs text-gray-500">Gmail: 587 (TLS) ho·∫∑c 465 (SSL)</p>
                </div>

                <div class="mb-4">
                    <label for="nqtSmtpUsername" class="block text-sm font-medium text-gray-700 mb-1">Email (Username)</label>
                    <input type="email" autocomplete="chrome-off"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all"
                        id="nqtSmtpUsername" name="nqtSmtpUsername" th:value="${nqtSmtpUsername}" placeholder="your-email@gmail.com">
                    <p class="mt-1 text-xs text-gray-500">ƒê·ªãa ch·ªâ email Gmail c·ªßa b·∫°n</p>
                </div>

                <div class="mb-4">
                    <label for="nqtSmtpPassword" class="block text-sm font-medium text-gray-700 mb-1">App Password</label>
                    <input type="password" autocomplete="new-password"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all"
                        id="nqtSmtpPassword" name="nqtSmtpPassword" placeholder="Nh·∫≠p App Password (16 k√Ω t·ª±)">
                    <p class="mt-1 text-xs text-gray-500">App Password t·ª´ Google (kh√¥ng ph·∫£i m·∫≠t kh·∫©u Gmail th√¥ng th∆∞·ªùng). ƒê·ªÉ tr·ªëng n·∫øu kh√¥ng mu·ªën thay ƒë·ªïi.</p>
                </div>

                <div class="mb-4">
                    <label for="nqtSmtpFromEmail" class="block text-sm font-medium text-gray-700 mb-1">Email g·ª≠i ƒëi (From Email)</label>
                    <input type="email" autocomplete="chrome-off"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all"
                        id="nqtSmtpFromEmail" name="nqtSmtpFromEmail" th:value="${nqtSmtpFromEmail}" placeholder="your-email@gmail.com">
                    <p class="mt-1 text-xs text-gray-500">Email s·∫Ω hi·ªÉn th·ªã trong ph·∫ßn "From" c·ªßa email g·ª≠i ƒëi</p>
                </div>

                <div class="mb-4">
                    <label for="nqtSmtpFromName" class="block text-sm font-medium text-gray-700 mb-1">T√™n ng∆∞·ªùi g·ª≠i (From Name)</label>
                    <input type="text" autocomplete="chrome-off"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all"
                        id="nqtSmtpFromName" name="nqtSmtpFromName" th:value="${nqtSmtpFromName}" placeholder="Hotel NQT">
                    <p class="mt-1 text-xs text-gray-500">T√™n s·∫Ω hi·ªÉn th·ªã trong ph·∫ßn "From" c·ªßa email g·ª≠i ƒëi</p>
                </div>

                <div class="mb-4">
                    <button type="button" onclick="testSmtpConnection()"
                        class="px-4 py-2 bg-green-600 hover:bg-green-700 text-white font-medium rounded-lg shadow-sm transition-colors">
                        <i class="bi bi-envelope-check mr-2"></i> Test k·∫øt n·ªëi SMTP
                    </button>
                    <div id="smtpTestResult" class="mt-2 hidden"></div>
                </div>
            </div>

            <!-- Tab: CHI·∫æT KH·∫§U VIP -->
            <div id="content-vip" class="tab-content hidden">
                <h3 class="text-lg font-semibold text-gray-800 mb-4">Chi·∫øt kh·∫•u Kh√°ch VIP</h3>
                <div class="mb-4">
                    <label for="nqtVipDiscountPercent" class="block text-sm font-medium text-gray-700 mb-1">
                        Ph·∫ßn trƒÉm chi·∫øt kh·∫•u m·∫∑c ƒë·ªãnh cho kh√°ch VIP (%)
                    </label>
                    <div class="flex items-center space-x-2">
                        <input type="number" autocomplete="chrome-off"
                            min="0" 
                            max="100" 
                            step="0.1"
                            class="w-32 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all"
                            id="nqtVipDiscountPercent" 
                            name="nqtVipDiscountPercent" 
                            th:value="${nqtVipDiscountPercent ?: '10'}"
                            placeholder="10">
                        <span class="text-sm text-gray-500">% (0-100)</span>
                    </div>
                    <p class="mt-1 text-xs text-gray-500">
                        Chi·∫øt kh·∫•u n√†y s·∫Ω t·ª± ƒë·ªông √°p d·ª•ng cho t·∫•t c·∫£ kh√°ch h√†ng c√≥ c·∫•p b·∫≠c VIP khi ƒë·∫∑t ph√≤ng (n·∫øu kh√¥ng s·ª≠ d·ª•ng m√£ gi·∫£m gi√° kh√°c).
                    </p>
                </div>
            </div>

            <!-- Tab: LINK H·ªñ TR·ª¢ -->
            <div id="content-support" class="tab-content hidden">
                <h3 class="text-lg font-semibold text-gray-800 mb-4">C√°c link h·ªó tr·ª£</h3>
                <div class="mb-6">
                    <label for="nqtWebsiteSupportLinks" class="block text-sm font-medium text-gray-700 mb-1">C√°c link h·ªó tr·ª£ (m·ªói d√≤ng m·ªôt link, format: T√™n|URL|N·ªôi dung HTML)</label>
                    <textarea id="nqtWebsiteSupportLinks" name="nqtWebsiteSupportLinks" rows="8" autocomplete="chrome-off"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all font-mono text-sm"
                        placeholder="Ch√≠nh s√°ch h·ªßy|/nqtSupport/chinh-sach-huy|&lt;p&gt;N·ªôi dung HTML ·ªü ƒë√¢y...&lt;/p&gt;&#10;ƒêi·ªÅu kho·∫£n s·ª≠ d·ª•ng|/nqtSupport/dieu-khoan|&lt;p&gt;N·ªôi dung HTML...&lt;/p&gt;"><th:block th:if="${nqtWebsiteSupportLinks != null and nqtWebsiteSupportLinks != ''}" th:inline="text">[[${nqtWebsiteSupportLinks}]]</th:block></textarea>
                    <div class="text-xs text-gray-500 mt-2 space-y-1">
                        <p><strong>Format:</strong> T√™n|URL|N·ªôi dung HTML</p>
                        <p><strong>V√≠ d·ª•:</strong></p>
                        <pre class="bg-gray-50 p-2 rounded text-xs overflow-x-auto">Ch√≠nh s√°ch h·ªßy|/nqtSupport/chinh-sach-huy|&lt;h2&gt;Ch√≠nh s√°ch h·ªßy&lt;/h2&gt;&lt;p&gt;Kh√°ch h√†ng c√≥ th·ªÉ h·ªßy ƒë·∫∑t ph√≤ng tr∆∞·ªõc 24 gi·ªù...&lt;/p&gt;
ƒêi·ªÅu kho·∫£n s·ª≠ d·ª•ng|/nqtSupport/dieu-khoan|&lt;h2&gt;ƒêi·ªÅu kho·∫£n&lt;/h2&gt;&lt;p&gt;N·ªôi dung ƒëi·ªÅu kho·∫£n...&lt;/p&gt;</pre>
                        <p class="mt-2"><strong>L∆∞u √Ω:</strong> URL s·∫Ω t·ª± ƒë·ªông t·∫°o route /nqtSupport/{slug}. N·∫øu kh√¥ng c√≥ n·ªôi dung HTML, s·∫Ω hi·ªÉn th·ªã n·ªôi dung m·∫∑c ƒë·ªãnh.</p>
                    </div>
                </div>
            </div>

            <!-- Tab: RATE LIMITING & BRUTE FORCE -->
            <div id="content-ratelimit" class="tab-content hidden">
                <h3 class="text-lg font-semibold text-gray-800 mb-4">C·∫•u h√¨nh Rate Limiting & Brute Force Protection</h3>
                <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6">
                    <p class="text-sm text-yellow-800"><strong>L∆∞u √Ω:</strong> C√°c c√†i ƒë·∫∑t n√†y gi√∫p b·∫£o v·ªá h·ªá th·ªëng kh·ªèi c√°c cu·ªôc t·∫•n c√¥ng brute force v√† rate limiting. Thay ƒë·ªïi c√°c gi√° tr·ªã n√†y c√≥ th·ªÉ ·∫£nh h∆∞·ªüng ƒë·∫øn tr·∫£i nghi·ªám ng∆∞·ªùi d√πng.</p>
                </div>

                <div class="mb-6 border-b pb-4">
                    <h4 class="text-md font-semibold text-gray-700 mb-3">Brute Force Protection (B·∫£o v·ªá ch·ªëng t·∫•n c√¥ng brute force)</h4>
                    
                    <div class="mb-4">
                        <label for="rate_limit_max_failed_attempts" class="block text-sm font-medium text-gray-700 mb-1">
                            S·ªë l·∫ßn ƒëƒÉng nh·∫≠p sai t·ªëi ƒëa tr∆∞·ªõc khi kh√≥a t√†i kho·∫£n
                        </label>
                        <div class="flex items-center space-x-2">
                            <input type="number" autocomplete="chrome-off"
                                min="3" 
                                max="20" 
                                step="1"
                                class="w-32 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all"
                                id="rate_limit_max_failed_attempts" 
                                name="rate_limit_max_failed_attempts" 
                                th:value="${rate_limit_max_failed_attempts ?: '5'}"
                                placeholder="5">
                            <span class="text-sm text-gray-500">l·∫ßn (3-20)</span>
                        </div>
                        <p class="mt-1 text-xs text-gray-500">
                            Sau khi ƒëƒÉng nh·∫≠p sai s·ªë l·∫ßn n√†y, t√†i kho·∫£n s·∫Ω b·ªã kh√≥a t·∫°m th·ªùi.
                        </p>
                    </div>

                    <div class="mb-4">
                        <label for="rate_limit_lockout_duration_minutes" class="block text-sm font-medium text-gray-700 mb-1">
                            Th·ªùi gian kh√≥a t√†i kho·∫£n (ph√∫t)
                        </label>
                        <div class="flex items-center space-x-2">
                            <input type="number" autocomplete="chrome-off"
                                min="5" 
                                max="1440" 
                                step="1"
                                class="w-32 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all"
                                id="rate_limit_lockout_duration_minutes" 
                                name="rate_limit_lockout_duration_minutes" 
                                th:value="${rate_limit_lockout_duration_minutes ?: '15'}"
                                placeholder="15">
                            <span class="text-sm text-gray-500">ph√∫t (5-1440)</span>
                        </div>
                        <p class="mt-1 text-xs text-gray-500">
                            Th·ªùi gian t√†i kho·∫£n b·ªã kh√≥a sau khi v∆∞·ª£t qu√° s·ªë l·∫ßn ƒëƒÉng nh·∫≠p sai.
                        </p>
                    </div>
                </div>

                <div class="mb-6 border-b pb-4">
                    <h4 class="text-md font-semibold text-gray-700 mb-3">Rate Limiting theo T√†i kho·∫£n/Email</h4>
                    
                    <div class="mb-4">
                        <label for="rate_limit_max_attempts" class="block text-sm font-medium text-gray-700 mb-1">
                            S·ªë l·∫ßn th·ª≠ ƒëƒÉng nh·∫≠p t·ªëi ƒëa trong kho·∫£ng th·ªùi gian
                        </label>
                        <div class="flex items-center space-x-2">
                            <input type="number" autocomplete="chrome-off"
                                min="5" 
                                max="50" 
                                step="1"
                                class="w-32 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all"
                                id="rate_limit_max_attempts" 
                                name="rate_limit_max_attempts" 
                                th:value="${rate_limit_max_attempts ?: '10'}"
                                placeholder="10">
                            <span class="text-sm text-gray-500">l·∫ßn (5-50)</span>
                        </div>
                        <p class="mt-1 text-xs text-gray-500">
                            Gi·ªõi h·∫°n s·ªë l·∫ßn th·ª≠ ƒëƒÉng nh·∫≠p cho m·ªói t√†i kho·∫£n/email trong kho·∫£ng th·ªùi gian.
                        </p>
                    </div>

                    <div class="mb-4">
                        <label for="rate_limit_window_minutes" class="block text-sm font-medium text-gray-700 mb-1">
                            Kho·∫£ng th·ªùi gian (ph√∫t)
                        </label>
                        <div class="flex items-center space-x-2">
                            <input type="number" autocomplete="chrome-off"
                                min="1" 
                                max="60" 
                                step="1"
                                class="w-32 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all"
                                id="rate_limit_window_minutes" 
                                name="rate_limit_window_minutes" 
                                th:value="${rate_limit_window_minutes ?: '15'}"
                                placeholder="15">
                            <span class="text-sm text-gray-500">ph√∫t (1-60)</span>
                        </div>
                        <p class="mt-1 text-xs text-gray-500">
                            Kho·∫£ng th·ªùi gian t√≠nh s·ªë l·∫ßn th·ª≠ ƒëƒÉng nh·∫≠p.
                        </p>
                    </div>
                </div>

                <div class="mb-6 border-b pb-4">
                    <h4 class="text-md font-semibold text-gray-700 mb-3">Rate Limiting theo ƒê·ªãa ch·ªâ IP</h4>
                    
                    <div class="mb-4">
                        <label for="rate_limit_ip_max_attempts" class="block text-sm font-medium text-gray-700 mb-1">
                            S·ªë l·∫ßn th·ª≠ ƒëƒÉng nh·∫≠p t·ªëi ƒëa t·ª´ m·ªôt IP
                        </label>
                        <div class="flex items-center space-x-2">
                            <input type="number" autocomplete="chrome-off"
                                min="10" 
                                max="100" 
                                step="1"
                                class="w-32 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all"
                                id="rate_limit_ip_max_attempts" 
                                name="rate_limit_ip_max_attempts" 
                                th:value="${rate_limit_ip_max_attempts ?: '20'}"
                                placeholder="20">
                            <span class="text-sm text-gray-500">l·∫ßn (10-100)</span>
                        </div>
                        <p class="mt-1 text-xs text-gray-500">
                            Gi·ªõi h·∫°n s·ªë l·∫ßn th·ª≠ ƒëƒÉng nh·∫≠p t·ª´ m·ªôt ƒë·ªãa ch·ªâ IP trong kho·∫£ng th·ªùi gian.
                        </p>
                    </div>

                    <div class="mb-4">
                        <label for="rate_limit_ip_window_minutes" class="block text-sm font-medium text-gray-700 mb-1">
                            Kho·∫£ng th·ªùi gian cho IP (ph√∫t)
                        </label>
                        <div class="flex items-center space-x-2">
                            <input type="number" autocomplete="chrome-off"
                                min="1" 
                                max="60" 
                                step="1"
                                class="w-32 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all"
                                id="rate_limit_ip_window_minutes" 
                                name="rate_limit_ip_window_minutes" 
                                th:value="${rate_limit_ip_window_minutes ?: '15'}"
                                placeholder="15">
                            <span class="text-sm text-gray-500">ph√∫t (1-60)</span>
                        </div>
                        <p class="mt-1 text-xs text-gray-500">
                            Kho·∫£ng th·ªùi gian t√≠nh s·ªë l·∫ßn th·ª≠ ƒëƒÉng nh·∫≠p t·ª´ m·ªôt IP.
                        </p>
                    </div>
                </div>

                <div class="mb-6">
                    <h4 class="text-md font-semibold text-gray-700 mb-3">D·ªçn d·∫πp d·ªØ li·ªáu</h4>
                    
                    <div class="mb-4">
                        <label for="rate_limit_cleanup_days" class="block text-sm font-medium text-gray-700 mb-1">
                            S·ªë ng√†y gi·ªØ l·∫°i l·ªãch s·ª≠ ƒëƒÉng nh·∫≠p
                        </label>
                        <div class="flex items-center space-x-2">
                            <input type="number" autocomplete="chrome-off"
                                min="7" 
                                max="365" 
                                step="1"
                                class="w-32 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all"
                                id="rate_limit_cleanup_days" 
                                name="rate_limit_cleanup_days" 
                                th:value="${rate_limit_cleanup_days ?: '30'}"
                                placeholder="30">
                            <span class="text-sm text-gray-500">ng√†y (7-365)</span>
                        </div>
                        <p class="mt-1 text-xs text-gray-500">
                            C√°c b·∫£n ghi ƒëƒÉng nh·∫≠p c≈© h∆°n s·ªë ng√†y n√†y s·∫Ω t·ª± ƒë·ªông b·ªã x√≥a (ch·∫°y h√†ng ng√†y l√∫c 2h s√°ng).
                        </p>
                    </div>
                </div>
            </div>

            <!-- Tab: B·∫¢O M·∫¨T -->
            <div id="content-security" class="tab-content hidden">
                <h3 class="text-lg font-semibold text-gray-800 mb-4">C·∫•u h√¨nh B·∫£o m·∫≠t</h3>
                <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6">
                    <p class="text-sm text-blue-800"><strong>L∆∞u √Ω:</strong> Thay ƒë·ªïi ƒë∆∞·ªùng d·∫´n admin gi√∫p ·∫©n trang qu·∫£n tr·ªã kh·ªèi c√°c cu·ªôc t·∫•n c√¥ng t·ª± ƒë·ªông. Sau khi thay ƒë·ªïi, b·∫°n c·∫ßn ƒëƒÉng nh·∫≠p l·∫°i b·∫±ng ƒë∆∞·ªùng d·∫´n m·ªõi.</p>
                </div>

                <div class="mb-6">
                    <h4 class="text-md font-semibold text-gray-700 mb-3">ƒê∆∞·ªùng d·∫´n Admin</h4>
                    
                    <div class="mb-4">
                        <label for="admin_path" class="block text-sm font-medium text-gray-700 mb-1">
                            ƒê∆∞·ªùng d·∫´n trang qu·∫£n tr·ªã
                        </label>
                        <div class="flex items-center space-x-2">
                            <span class="text-gray-500">/</span>
                            <input type="text" autocomplete="chrome-off"
                                pattern="[a-zA-Z0-9_-]+"
                                class="flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all"
                                id="admin_path" 
                                name="admin_path" 
                                th:value="${admin_path ?: 'admin'}"
                                placeholder="admin">
                        </div>
                        <p class="mt-1 text-xs text-gray-500">
                            Ch·ªâ cho ph√©p ch·ªØ c√°i, s·ªë, d·∫•u g·∫°ch d∆∞·ªõi (_) v√† d·∫•u g·∫°ch ngang (-). Kh√¥ng ƒë∆∞·ª£c s·ª≠ d·ª•ng c√°c t·ª´ kh√≥a: api, oauth2, login, static, uploads, nqt, favicon.ico
                        </p>
                        <p class="mt-1 text-xs text-yellow-600">
                            <strong>C·∫£nh b√°o:</strong> Sau khi thay ƒë·ªïi, ƒë∆∞·ªùng d·∫´n hi·ªán t·∫°i s·∫Ω kh√¥ng c√≤n ho·∫°t ƒë·ªông. H√£y ghi nh·ªõ ƒë∆∞·ªùng d·∫´n m·ªõi!
                        </p>
                    </div>
                </div>
            </div>

            <!-- Tab: BANNER -->
            <div id="content-banner" class="tab-content hidden">
                <h3 class="text-lg font-semibold text-gray-800 mb-4">Qu·∫£n l√Ω Banner Gi·ªõi thi·ªáu</h3>
                <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6">
                    <p class="text-sm text-blue-800"><strong>H∆∞·ªõng d·∫´n:</strong> Upload c√°c ·∫£nh ƒë·ªÉ t·∫°o banner carousel tr√™n trang ch·ªß.</p>
                </div>

                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Upload ·∫£nh banner m·ªõi</label>
                    <input type="file" name="bannerImages" accept="image/*" multiple autocomplete="chrome-off"
                        class="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"
                        id="bannerImagesInput"
                        onchange="previewBannerImages(this)">
                    <p class="mt-1 text-xs text-gray-500">C√≥ th·ªÉ ch·ªçn nhi·ªÅu ·∫£nh c√πng l√∫c (Ctrl+Click ho·∫∑c Cmd+Click)</p>
                </div>

                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Danh s√°ch ·∫£nh banner hi·ªán t·∫°i</label>
                    <div id="bannerImagesList" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
                        <!-- Banner images will be displayed here -->
                        <div th:each="banner, iterStat : ${bannerImagesList}" 
                             class="relative group border border-gray-300 rounded-lg overflow-hidden bg-gray-50">
                            <img th:src="${banner}" alt="Banner" 
                                 class="w-full h-32 object-cover">
                            <div class="absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all flex items-center justify-center">
                                <button type="button" 
                                        onclick="removeBannerImage(this, '[[${banner}]]')"
                                        class="opacity-0 group-hover:opacity-100 bg-red-500 text-white px-3 py-1 rounded text-sm font-medium transition-all">
                                    X√≥a
                                </button>
                            </div>
                            <div class="absolute top-2 left-2 bg-black bg-opacity-50 text-white text-xs px-2 py-1 rounded">
                                <span th:text="${iterStat.index + 1}">1</span>
                            </div>
                        </div>
                    </div>
                    <p th:if="${bannerImagesList == null or bannerImagesList.isEmpty()}" 
                       class="text-sm text-gray-500 mt-2">Ch∆∞a c√≥ ·∫£nh banner n√†o. H√£y upload ·∫£nh ƒë·ªÉ b·∫Øt ƒë·∫ßu.</p>
                </div>

                <!-- Hidden input to store banner images JSON -->
                <input type="hidden" name="bannerImagesJson" id="bannerImagesJson" 
                       th:value="${bannerImagesJson ?: '[]'}">
            </div>

            <!-- Tab: POPUP TRANG CH·ª¶ -->
            <div id="content-popup" class="tab-content hidden">
                <h3 class="text-lg font-semibold text-gray-800 mb-4">C·∫•u h√¨nh Popup Ch√†o m·ª´ng Trang ch·ªß</h3>
                <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6">
                    <p class="text-sm text-blue-800"><strong>H∆∞·ªõng d·∫´n:</strong> C·∫•u h√¨nh popup hi·ªÉn th·ªã khi kh√°ch truy c·∫≠p trang ch·ªß. Popup s·∫Ω t·ª± ƒë·ªông ·∫©n trong 2 ti·∫øng sau khi ƒë√≥ng.</p>
                </div>

                <div class="mb-4">
                    <label for="nqtPopupEnabled" class="flex items-center space-x-2 cursor-pointer">
                        <input type="checkbox" id="nqtPopupEnabled" name="nqtPopupEnabled" value="true" autocomplete="chrome-off"
                            th:checked="${nqtPopupEnabled == 'true'}"
                            class="w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500">
                        <span class="text-sm font-medium text-gray-700">B·∫≠t popup ch√†o m·ª´ng</span>
                    </label>
                    <p class="mt-1 text-xs text-gray-500">B·ªè ch·ªçn ƒë·ªÉ t·∫Øt popup ho√†n to√†n</p>
                </div>

                <div class="mb-4">
                    <label for="nqtPopupTitle" class="block text-sm font-medium text-gray-700 mb-1">Ti√™u ƒë·ªÅ popup</label>
                    <input type="text" autocomplete="chrome-off"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all"
                        id="nqtPopupTitle" name="nqtPopupTitle" 
                        th:value="${nqtPopupTitle ?: 'üéâ Ch√†o m·ª´ng ƒë·∫øn v·ªõi ' + (nqtWebsiteName ?: 'Hotel NQT') + '!'}"
                        placeholder="üéâ Ch√†o m·ª´ng ƒë·∫øn v·ªõi Hotel NQT!">
                    <p class="mt-1 text-xs text-gray-500">Ti√™u ƒë·ªÅ hi·ªÉn th·ªã ·ªü ƒë·∫ßu popup</p>
                </div>

                <div class="mb-4">
                    <label for="nqtPopupContent" class="block text-sm font-medium text-gray-700 mb-1">N·ªôi dung popup</label>
                    <textarea id="nqtPopupContent" name="nqtPopupContent" rows="4" autocomplete="chrome-off"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all"
                        placeholder="Ch√∫ng t√¥i r·∫•t vui ƒë∆∞·ª£c ch√†o ƒë√≥n b·∫°n ƒë·∫øn v·ªõi kh√°ch s·∫°n c·ªßa ch√∫ng t√¥i. H√£y t·∫≠n h∆∞·ªüng nh·ªØng ∆∞u ƒë√£i ƒë·ªôc quy·ªÅn ngay h√¥m nay!"><th:block th:if="${nqtPopupContent != null and nqtPopupContent != ''}" th:inline="text">[[${nqtPopupContent}]]</th:block></textarea>
                    <p class="mt-1 text-xs text-gray-500">N·ªôi dung m√¥ t·∫£ hi·ªÉn th·ªã trong popup</p>
                </div>

                <div class="mb-4">
                    <label for="nqtPopupOfferText" class="block text-sm font-medium text-gray-700 mb-1">Text ∆∞u ƒë√£i (s·ªë ph·∫ßn trƒÉm ho·∫∑c text)</label>
                    <input type="text" autocomplete="chrome-off"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all"
                        id="nqtPopupOfferText" name="nqtPopupOfferText" 
                        th:value="${nqtPopupOfferText ?: 'Gi·∫£m 20%'}"
                        placeholder="Gi·∫£m 20%">
                    <p class="mt-1 text-xs text-gray-500">V√≠ d·ª•: "Gi·∫£m 20%", "T·∫∑ng 500k", "Mi·ªÖn ph√≠ b·ªØa s√°ng"</p>
                </div>

                <div class="mb-4">
                    <label for="nqtPopupOfferDesc" class="block text-sm font-medium text-gray-700 mb-1">M√¥ t·∫£ ∆∞u ƒë√£i</label>
                    <input type="text" autocomplete="chrome-off"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all"
                        id="nqtPopupOfferDesc" name="nqtPopupOfferDesc" 
                        th:value="${nqtPopupOfferDesc ?: 'Cho ƒë∆°n ƒë·∫∑t ph√≤ng ƒë·∫ßu ti√™n'}"
                        placeholder="Cho ƒë∆°n ƒë·∫∑t ph√≤ng ƒë·∫ßu ti√™n">
                    <p class="mt-1 text-xs text-gray-500">M√¥ t·∫£ chi ti·∫øt v·ªÅ ∆∞u ƒë√£i</p>
                </div>

                <div class="mb-4">
                    <label for="nqtPopupButtonText" class="block text-sm font-medium text-gray-700 mb-1">Text n√∫t b·∫•m</label>
                    <input type="text" autocomplete="chrome-off"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all"
                        id="nqtPopupButtonText" name="nqtPopupButtonText" 
                        th:value="${nqtPopupButtonText ?: 'ƒê·∫∑t ph√≤ng ngay'}"
                        placeholder="ƒê·∫∑t ph√≤ng ngay">
                    <p class="mt-1 text-xs text-gray-500">Text hi·ªÉn th·ªã tr√™n n√∫t b·∫•m trong popup</p>
                </div>

                <div class="mb-4">
                    <label for="nqtPopupButtonLink" class="block text-sm font-medium text-gray-700 mb-1">Link n√∫t b·∫•m (t√πy ch·ªçn)</label>
                    <input type="text" autocomplete="chrome-off"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all"
                        id="nqtPopupButtonLink" name="nqtPopupButtonLink" 
                        th:value="${nqtPopupButtonLink ?: '#booking'}"
                        placeholder="#booking ho·∫∑c /nqtDatPhong">
                    <p class="mt-1 text-xs text-gray-500">Link khi click n√∫t. ƒê·ªÉ tr·ªëng ho·∫∑c #booking ƒë·ªÉ scroll ƒë·∫øn form ƒë·∫∑t ph√≤ng</p>
                </div>
            </div>

            <div class="mt-6 pt-4 border-t">
                <button type="submit"
                    class="px-6 py-2.5 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg shadow-sm transition-colors">
                    L∆∞u c·∫•u h√¨nh
                </button>
            </div>
        </form>

        <script>
            // Tab navigation
            function showTab(tabName) {
                // Hide all tab contents
                document.querySelectorAll('.tab-content').forEach(content => {
                    content.classList.add('hidden');
                });
                
                // Remove active state from all tabs
                document.querySelectorAll('[id^="tab-"]').forEach(tab => {
                    tab.classList.remove('bg-white', 'text-gray-800', 'shadow-sm');
                    tab.classList.add('text-white', 'hover:bg-gray-600');
                });
                
                // Show selected tab content
                document.getElementById('content-' + tabName).classList.remove('hidden');
                
                // Add active state to selected tab
                const activeTab = document.getElementById('tab-' + tabName);
                activeTab.classList.remove('text-white', 'hover:bg-gray-600');
                activeTab.classList.add('bg-white', 'text-gray-800', 'shadow-sm');
            }
            
            // Initialize: show general tab by default
            document.addEventListener('DOMContentLoaded', function() {
                showTab('general');
                
                // Disable autocomplete for all form fields - multiple methods
                const form = document.querySelector('form[method="post"]');
                if (form) {
                    // Method 1: Set autocomplete off on form
                    form.setAttribute('autocomplete', 'off');
                    
                    // Method 2: Disable autocomplete for all inputs, selects, and textareas
                    const allInputs = form.querySelectorAll('input, select, textarea');
                    allInputs.forEach(function(field) {
                        // Skip hidden fields
                        if (field.type === 'hidden' || field.style.position === 'absolute') {
                            return;
                        }
                        
                        // Set autocomplete attribute
                        if (field.type === 'password') {
                            field.setAttribute('autocomplete', 'new-password');
                        } else if (field.type === 'email') {
                            field.setAttribute('autocomplete', 'chrome-off');
                        } else if (!field.getAttribute('autocomplete') || field.getAttribute('autocomplete') === 'off') {
                            field.setAttribute('autocomplete', 'chrome-off');
                        }
                        
                        // Method 3: Set readonly then remove it to prevent autofill
                        if (field.type !== 'file' && field.type !== 'color' && field.type !== 'hidden') {
                            const originalReadonly = field.readOnly;
                            field.readOnly = true;
                            setTimeout(function() {
                                field.readOnly = originalReadonly;
                            }, 100);
                        }
                        
                        // Method 4: Add data attribute to confuse browser
                        field.setAttribute('data-lpignore', 'true');
                        field.setAttribute('data-form-type', 'other');
                    });
                }
                
                // Method 5: Prevent autofill on focus
                document.addEventListener('focusin', function(e) {
                    if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') {
                        if (e.target.type !== 'file' && e.target.type !== 'color') {
                            e.target.setAttribute('autocomplete', 'chrome-off');
                        }
                    }
                }, true);
            });
            function testSmtpConnection() {
                const resultDiv = document.getElementById('smtpTestResult');
                resultDiv.classList.remove('hidden');
                resultDiv.innerHTML = '<div class="bg-blue-50 border border-blue-200 text-blue-700 px-4 py-3 rounded-lg">ƒêang ki·ªÉm tra k·∫øt n·ªëi SMTP...</div>';
                
                // Get form values
                const formData = new FormData();
                formData.append('nqtSmtpHost', document.getElementById('nqtSmtpHost').value);
                formData.append('nqtSmtpPort', document.getElementById('nqtSmtpPort').value);
                formData.append('nqtSmtpUsername', document.getElementById('nqtSmtpUsername').value);
                formData.append('nqtSmtpPassword', document.getElementById('nqtSmtpPassword').value || '');
                formData.append('nqtSmtpFromEmail', document.getElementById('nqtSmtpFromEmail').value);
                
                const adminPath = /*[[${nqtAdminPath}]]*/ '/admin';
                fetch(adminPath + '/setting/test-smtp', {
                    method: 'POST',
                    body: formData
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        resultDiv.innerHTML = '<div class="bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg">‚úì K·∫øt n·ªëi SMTP th√†nh c√¥ng! ' + (data.message || '') + '</div>';
                    } else {
                        resultDiv.innerHTML = '<div class="bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg">‚úó L·ªói: ' + (data.message || 'Kh√¥ng th·ªÉ k·∫øt n·ªëi SMTP') + '</div>';
                    }
                })
                .catch(error => {
                    resultDiv.innerHTML = '<div class="bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg">‚úó L·ªói: ' + error.message + '</div>';
                });
            }

            // Banner Images Management
            let bannerImagesArray = [];
            
            // Initialize banner images from hidden input
            document.addEventListener('DOMContentLoaded', function() {
                const bannerImagesJson = document.getElementById('bannerImagesJson');
                if (bannerImagesJson && bannerImagesJson.value) {
                    try {
                        bannerImagesArray = JSON.parse(bannerImagesJson.value);
                        updateBannerImagesList();
                    } catch (e) {
                        console.error('Error parsing banner images JSON:', e);
                    }
                }
            });

            function previewBannerImages(input) {
                if (input.files && input.files.length > 0) {
                    // Upload files first via AJAX
                    const formData = new FormData();
                    for (let i = 0; i < input.files.length; i++) {
                        formData.append('bannerImages', input.files[i]);
                    }
                    
                    // Get admin path from current URL or use model attribute
                    let adminPath = /*[[${nqtAdminPath}]]*/ '/admin';
                    // If model attribute is not available, extract from current URL
                    if (!adminPath || adminPath === '/admin') {
                        const currentPath = window.location.pathname;
                        // Extract admin path from current URL (e.g., /admin/setting -> /admin)
                        const match = currentPath.match(/^\/([^\/]+)/);
                        if (match) {
                            adminPath = '/' + match[1];
                        }
                    }
                    console.log('Using admin path:', adminPath);
                    fetch(adminPath + '/setting/upload-banner', {
                        method: 'POST',
                        headers: {
                            'Accept': 'application/json'
                        },
                        body: formData
                    })
                    .then(response => {
                        // Check if response is JSON
                        const contentType = response.headers.get('content-type');
                        if (!contentType || !contentType.includes('application/json')) {
                            return response.text().then(text => {
                                console.error('Non-JSON response:', text);
                                throw new Error('Server tr·∫£ v·ªÅ d·ªØ li·ªáu kh√¥ng h·ª£p l·ªá. Vui l√≤ng th·ª≠ l·∫°i.');
                            });
                        }
                        return response.json();
                    })
                    .then(data => {
                        if (data.success && data.images) {
                            // Add new images to array
                            data.images.forEach(img => {
                                if (!bannerImagesArray.includes(img)) {
                                    bannerImagesArray.push(img);
                                }
                            });
                            updateBannerImagesList();
                            // Clear input
                            input.value = '';
                        } else {
                            alert('L·ªói khi upload ·∫£nh: ' + (data.message || 'Kh√¥ng th·ªÉ upload'));
                        }
                    })
                    .catch(error => {
                        console.error('Error:', error);
                        alert('L·ªói khi upload ·∫£nh: ' + (error.message || 'Kh√¥ng th·ªÉ k·∫øt n·ªëi ƒë·∫øn server'));
                    });
                }
            }

            function removeBannerImage(button, imagePath) {
                if (confirm('B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a ·∫£nh n√†y kh·ªèi banner?')) {
                    bannerImagesArray = bannerImagesArray.filter(img => img !== imagePath);
                    updateBannerImagesList();
                }
            }

            function updateBannerImagesList() {
                const listDiv = document.getElementById('bannerImagesList');
                const hiddenInput = document.getElementById('bannerImagesJson');
                
                // Update hidden input
                hiddenInput.value = JSON.stringify(bannerImagesArray);
                
                // Update display
                if (bannerImagesArray.length === 0) {
                    listDiv.innerHTML = '<p class="text-sm text-gray-500 col-span-full">Ch∆∞a c√≥ ·∫£nh banner n√†o. H√£y upload ·∫£nh ƒë·ªÉ b·∫Øt ƒë·∫ßu.</p>';
                } else {
                    listDiv.innerHTML = bannerImagesArray.map((img, index) => `
                        <div class="relative group border border-gray-300 rounded-lg overflow-hidden bg-gray-50">
                            <img src="${img}" alt="Banner ${index + 1}" class="w-full h-32 object-cover">
                            <div class="absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all flex items-center justify-center">
                                <button type="button" 
                                        onclick="removeBannerImage(this, '${img}')"
                                        class="opacity-0 group-hover:opacity-100 bg-red-500 text-white px-3 py-1 rounded text-sm font-medium transition-all">
                                    X√≥a
                                </button>
                            </div>
                            <div class="absolute top-2 left-2 bg-black bg-opacity-50 text-white text-xs px-2 py-1 rounded">
                                ${index + 1}
                            </div>
                        </div>
                    `).join('');
                }
            }
        </script>
    </div>
</body>

</html>