<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org" th:fragment="layout(title, description)">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${title != null ? (title + ' - ' + (nqtWebsiteName ?: 'Hotel NQT')) : (nqtWebsiteName != null ? (nqtWebsiteName + ' - Trải nghiệm sang trọng đẳng cấp') : 'Hotel NQT - Trải nghiệm sang trọng đẳng cấp')}">
        Hotel NQT - Trải nghiệm sang trọng đẳng cấp
    </title>
    <meta name="description" th:content="${description ?: 'Khách sạn cao cấp với dịch vụ tinh tế, phòng nghỉ sang trọng và trải nghiệm độc quyền'}">
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link th:with="fontName=${#strings.replace(nqtWebsiteFont ?: 'Inter', ' ', '+')}" 
          th:href="@{'https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=' + ${fontName} + ':wght@300;400;500;600;700&display=swap'}" 
          rel="stylesheet">

    <style th:inline="css">
        :root {
            --color-charcoal: #1a1a1a;
            --color-stone: #2d2d2d;
            --color-beige: #f5f3f0;
            --color-gold: #d4af37;
            --color-copper: #b87333;
            --color-primary: /*[[${nqtWebsiteColor ?: '#d97706'}]]*/ #d97706;
        }

        * {
            font-family: /*[[${nqtWebsiteFont ?: 'Inter'}]]*/ 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;
            text-rendering: optimizeLegibility !important;
            -webkit-font-smoothing: antialiased !important;
            -moz-osx-font-smoothing: grayscale !important;
        }

        body {
            font-family: /*[[${nqtWebsiteFont ?: 'Inter'}]]*/ 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;
            text-rendering: optimizeLegibility !important;
            -webkit-font-smoothing: antialiased !important;
            -moz-osx-font-smoothing: grayscale !important;
        }

        .font-serif {
            font-family: 'Playfair Display', Georgia, 'Times New Roman', serif !important;
        }

        /* Glassmorphism Effect */
        .glass {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
        }

        .glass-dark {
            background: rgba(26, 26, 26, 0.7);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.95) !important;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(229, 231, 235, 0.5) !important;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06) !important;
        }

        .glass-card:hover {
            transform: translateY(-8px) scale(1.01);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15) !important;
            border-color: rgba(217, 119, 6, 0.3) !important;
        }

        /* Button Primary */
        .btn-primary {
            background: linear-gradient(to right, var(--color-primary), rgba(217, 119, 6, 0.8)) !important;
            color: white !important;
            border: none !important;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
            opacity: 0.9;
        }

        .btn-primary:active {
            transform: translateY(0);
        }

        /* Ensure buttons with inline styles override default */
        button.btn-primary, a.btn-primary {
            background: linear-gradient(to right, var(--color-primary), rgba(217, 119, 6, 0.8)) !important;
            color: white !important;
        }

        /* Navigation */
        .nav-glass {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
        }

        /* Input Focus */
        input:focus, select:focus, textarea:focus {
            outline: none;
            box-shadow: 0 0 0 2px var(--color-gold);
            border-color: var(--color-gold);
        }


        /* Gold Accent */
        .gold-accent {
            color: var(--color-primary) !important;
        }

        .gold-border {
            border-color: var(--color-primary);
        }

        /* Smooth Scroll */
        html {
            scroll-behavior: smooth;
        }

        /* Ensure content is below fixed navbar */
        body {
            padding-top: 0 !important;
            margin-top: 0 !important;
            display: flex !important;
            flex-direction: column !important;
            min-height: 100vh !important;
        }

        /* Content wrapper - ensure it's below navbar */
        .content-wrapper {
            padding-top: 140px !important;
            margin-top: 0 !important;
            position: relative;
            z-index: 1;
            flex: 1 0 auto !important;
            width: 100% !important;
            display: block !important;
            min-height: calc(100vh - 140px - 400px) !important;
        }

        /* Ensure all content fragments start below navbar - but don't override their own padding */
        .content-wrapper > *:first-child {
            margin-top: 0 !important;
        }

        /* Override any negative margins that might pull content up */
        .content-wrapper > div {
            margin-top: 0 !important;
        }

        /* User Avatar - Ensure it's always visible */
        .user-avatar-bg,
        button .w-9.h-9.rounded-full {
            display: flex !important;
            visibility: visible !important;
            opacity: 1 !important;
            width: 36px !important;
            height: 36px !important;
            min-width: 36px !important;
            min-height: 36px !important;
            max-width: 36px !important;
            max-height: 36px !important;
            position: relative !important;
            z-index: 50 !important;
            flex-shrink: 0 !important;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: var(--color-beige);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--color-gold);
            border-radius: 5px;
        }

        /* Zalo Chat Button */
        .fcta-zalo-mess {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 9999;
            background: #0068ff;
            color: white;
            padding: 12px 20px;
            border-radius: 50px;
            font-size: 14px;
            font-weight: 600;
            box-shadow: 0 4px 12px rgba(0, 104, 255, 0.4);
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .fcta-zalo-mess:hover {
            background: #0052cc;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0, 104, 255, 0.5);
        }

        .fcta-zalo-vi-tri-nut {
            position: fixed;
            bottom: 100px;
            right: 20px;
            z-index: 9998;
        }

        .fcta-zalo-nen-nut {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #0068ff 0%, #0052cc 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 12px rgba(0, 104, 255, 0.4);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .fcta-zalo-nen-nut:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(0, 104, 255, 0.6);
        }

        .fcta-zalo-ben-trong-nut {
            width: 32px;
            height: 32px;
            color: white;
        }

        .fcta-zalo-text {
            position: absolute;
            bottom: -25px;
            left: 50%;
            transform: translateX(-50%);
            white-space: nowrap;
            font-size: 12px;
            font-weight: 600;
            color: #0068ff;
        }

        /* Hotline Button */
        .fcta-hotline {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 9997;
            background: linear-gradient(135deg, #d97706 0%, rgba(217, 119, 6, 0.9) 100%);
            color: white !important;
            padding: 12px 20px;
            border-radius: 50px;
            font-size: 14px;
            font-weight: 600;
            box-shadow: 0 4px 12px rgba(217, 119, 6, 0.4);
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
        }

        .fcta-hotline:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(217, 119, 6, 0.5);
            color: white !important;
            opacity: 0.95;
        }

        .fcta-hotline svg {
            width: 18px;
            height: 18px;
            flex-shrink: 0;
        }

        @media (max-width: 768px) {
            .fcta-zalo-vi-tri-nut {
                bottom: 100px;
                right: 15px;
            }
            .fcta-zalo-mess {
                bottom: 15px;
                right: 15px;
                padding: 10px 16px;
                font-size: 12px;
            }
            .fcta-hotline {
                bottom: 15px;
                right: 15px;
                padding: 10px 16px;
                font-size: 12px;
            }
        }
    </style>
</head>

<body class="bg-white antialiased flex flex-col min-h-screen">
    <!-- Navigation -->
    <nav class="nav-glass fixed top-0 left-0 right-0 z-50 shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-20 gap-2 sm:gap-4">
                <!-- Logo -->
                <a href="/nqtTrangChu" class="flex items-center space-x-2 sm:space-x-3 group flex-shrink-0 min-w-0">
                    <div class="w-10 h-10 sm:w-12 sm:h-12 rounded-lg flex items-center justify-center shadow-lg group-hover:shadow-xl transition-all overflow-hidden flex-shrink-0"
                        th:style="'background: linear-gradient(to bottom right, ' + ${nqtWebsiteColor ?: '#d97706'} + ', ' + ${#strings.replace(nqtWebsiteColor ?: '#d97706', '#', '')} + 'cc);'">
                        <img th:src="${nqtWebsiteLogo}" alt="Logo" class="w-full h-full object-cover"
                            th:if="${nqtWebsiteLogo != null and nqtWebsiteLogo != ''}">
                        <span class="text-white font-serif font-bold text-lg sm:text-xl" 
                            th:unless="${nqtWebsiteLogo != null and nqtWebsiteLogo != ''}"
                            th:text="${#strings.substring(nqtWebsiteName ?: 'Hotel NQT', 0, 1)}">H</span>
                    </div>
                    <span class="text-lg sm:text-xl md:text-2xl font-serif font-bold text-gray-900 truncate" th:text="${nqtWebsiteName ?: 'Hotel NQT'}">Hotel NQT</span>
                </a>

                <!-- Desktop Menu -->
                <div class="hidden lg:flex items-center space-x-8">
                    <th:block th:unless="${isSupportPage != null and isSupportPage == true}">
                        <a href="/nqtPhong" class="text-gray-700 hover:text-amber-700 font-medium transition-colors">Phòng</a>
                        <a href="/nqtLoaiPhong" class="text-gray-700 hover:text-amber-700 font-medium transition-colors">Loại phòng</a>
                        <a href="/nqtDichVu" class="text-gray-700 hover:text-amber-700 font-medium transition-colors">Dịch vụ</a>
                        <a href="/nqtTinTuc" class="text-gray-700 hover:text-amber-700 font-medium transition-colors">Tin tức</a>
                        <a href="/nqtLienHe" class="text-gray-700 hover:text-amber-700 font-medium transition-colors">Liên hệ</a>
                    </th:block>
                </div>

                <!-- User Actions -->
                <div class="flex items-center space-x-2 sm:space-x-4 flex-shrink-0" style="margin-right: 50px;">
                    <th:block th:if="${session.nqtCustomerUser == null}">
                        <a href="/nqtDangNhap" class="text-gray-700 hover:text-amber-700 font-medium transition-colors text-sm sm:text-base">Đăng nhập</a>
                        <a href="/nqtDangKy" class="bg-gradient-to-r from-amber-600 to-amber-800 text-white px-4 sm:px-6 py-2 sm:py-2.5 rounded-lg font-medium hover:shadow-lg transition-all hover:scale-105 text-sm sm:text-base">
                            Đăng ký
                        </a>
                    </th:block>
                    <th:block th:if="${session.nqtCustomerUser != null}">
                        <!-- Admin Button -->
                        <a th:if="${session.nqtCustomerUser != null and session.nqtCustomerUser.nqtVaiTro != null and session.nqtCustomerUser.nqtVaiTro == 99}" 
                           th:href="${nqtAdminPath}" 
                           class="flex items-center space-x-1 sm:space-x-2 px-3 sm:px-4 py-2 sm:py-2.5 rounded-lg font-medium transition-all hover:shadow-md text-gray-700 bg-gray-100 hover:bg-gray-200 border border-gray-300 text-xs sm:text-sm">
                            <svg class="w-3 h-3 sm:w-4 sm:h-4 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                            </svg>
                            <span class="hidden sm:block" >Admin</span>
                        </a>
                        <!-- User Menu -->
                        <div class="relative group">
                            <button class="flex items-center space-x-2 text-gray-700 hover:text-amber-700 transition-colors" type="button">
                                <div class="rounded-full flex items-center justify-center flex-shrink-0 shadow-md overflow-hidden"
                                    style="width: 36px !important; height: 36px !important; min-width: 36px !important; min-height: 36px !important; max-width: 36px !important; max-height: 36px !important; display: flex !important; visibility: visible !important; opacity: 1 !important; position: relative !important; z-index: 50 !important; background: linear-gradient(135deg, #d97706, rgba(217, 119, 6, 0.8)) !important;"
                                    th:style="'width: 36px !important; height: 36px !important; min-width: 36px !important; min-height: 36px !important; max-width: 36px !important; max-height: 36px !important; display: flex !important; visibility: visible !important; opacity: 1 !important; position: relative !important; z-index: 50 !important; background: linear-gradient(135deg, ' + ${nqtWebsiteColor ?: '#d97706'} + ', rgba(217, 119, 6, 0.8)) !important;'">
                                    <span class="text-white font-semibold text-sm leading-none" 
                                        style="color: white !important; font-size: 14px !important; line-height: 1 !important; display: block !important;"
                                        th:text="${session.nqtCustomerUser != null and session.nqtCustomerUser.nqtHoVaTen != null ? #strings.substring(session.nqtCustomerUser.nqtHoVaTen, 0, 1) : 'U'}">U</span>
                                </div>
                                <span class="font-medium hidden md:block" th:text="${session.nqtCustomerUser.nqtHoVaTen}">User</span>
                            </button>
                            <div class="absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 border border-gray-100">
                                <a href="/nqtTaiKhoan" class="block px-4 py-2.5 text-gray-700 hover:bg-amber-50 rounded-t-lg transition-colors">Tài khoản</a>
                                <a href="/nqtDatPhongCuaToi" class="block px-4 py-2.5 text-gray-700 hover:bg-amber-50 transition-colors">Đặt phòng của tôi</a>
                                <a href="/nqtDangXuat" class="block px-4 py-2.5 text-red-600 hover:bg-red-50 rounded-b-lg transition-colors">Đăng xuất</a>
                            </div>
                        </div>
                    </th:block>
                </div>
            </div>
        </div>
    </nav>

    <!-- Content -->
    <div class="content-wrapper" th:replace="~{::content}">
        <!-- Content will be inserted here by pages using this layout -->
    </div>

    <!-- Footer -->
    <footer class="bg-gradient-to-b from-gray-900 via-gray-800 to-gray-900 text-white py-16 mt-auto w-full flex-shrink-0">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-12 mb-12">
                <div class="md:col-span-1">
                    <div class="flex items-center space-x-4 mb-6">
                        <div class="w-14 h-14 rounded-xl flex items-center justify-center overflow-hidden shadow-lg transition-transform hover:scale-105"
                            th:style="'background: linear-gradient(135deg, ' + ${nqtWebsiteColor ?: '#d97706'} + ', ' + ${#strings.replace(nqtWebsiteColor ?: '#d97706', '#', '')} + 'dd);'">
                            <img th:src="${nqtWebsiteLogo}" alt="Logo" class="w-full h-full object-cover"
                                th:if="${nqtWebsiteLogo != null and nqtWebsiteLogo != ''}">
                            <span class="text-white font-serif font-bold text-2xl" 
                                th:unless="${nqtWebsiteLogo != null and nqtWebsiteLogo != ''}"
                                th:text="${#strings.substring(nqtWebsiteName ?: 'Hotel NQT', 0, 1)}">H</span>
                        </div>
                        <div>
                            <h2 class="text-2xl font-serif font-bold leading-tight" th:text="${nqtWebsiteName ?: 'Hotel NQT'}">Hotel NQT</h2>
                        </div>
                    </div>
                    <p class="text-gray-300 text-sm leading-relaxed mb-6 max-w-xs">Khách sạn cao cấp với dịch vụ tinh tế và trải nghiệm độc quyền.</p>
                    <div class="flex items-center space-x-3">
                        <a th:href="${nqtWebsiteFacebook ?: '#'}" target="_blank" 
                            class="w-11 h-11 rounded-xl flex items-center justify-center transition-all duration-300 group bg-white hover:bg-blue-600 hover:scale-110 hover:shadow-xl overflow-hidden"
                            th:if="${nqtWebsiteFacebook != null and nqtWebsiteFacebook != '' and nqtWebsiteFacebook != '#'}"
                            title="Facebook">
                            <img src="/img/facebook.png" alt="Facebook" class="w-6 h-6 object-contain group-hover:brightness-0 group-hover:invert transition-all">
                        </a>
                        <a th:href="${nqtWebsiteZalo ?: '#'}" target="_blank" 
                            class="w-11 h-11 rounded-xl flex items-center justify-center transition-all duration-300 group bg-white hover:bg-blue-500 hover:scale-110 hover:shadow-xl overflow-hidden"
                            th:if="${nqtWebsiteZalo != null and nqtWebsiteZalo != '' and nqtWebsiteZalo != '#'}"
                            title="Zalo">
                            <img src="/img/Logo-Zalo-App-Rec.webp" alt="Zalo" class="w-6 h-6 object-contain group-hover:brightness-0 group-hover:invert transition-all">
                        </a>
                        <a th:href="${nqtWebsiteLink ?: '#'}" target="_blank" 
                            class="w-11 h-11 rounded-xl flex items-center justify-center transition-all duration-300 group bg-white hover:bg-indigo-600 hover:scale-110 hover:shadow-xl overflow-hidden"
                            th:if="${nqtWebsiteLink != null and nqtWebsiteLink != '' and nqtWebsiteLink != '#'}"
                            title="Website">
                            <img src="/img/world-wide-web.png" alt="Website" class="w-6 h-6 object-contain group-hover:brightness-0 group-hover:invert transition-all">
                        </a>
                    </div>
                </div>
                <div>
                    <h3 class="font-semibold text-lg mb-4">Về chúng tôi</h3>
                    <ul class="space-y-2 text-gray-400">
                        <li><a href="/nqtGioiThieu" class="hover:text-amber-500 transition-colors">Giới thiệu</a></li>
                        <li><a href="/nqtLienHe" class="hover:text-amber-500 transition-colors">Liên hệ</a></li>
                        <li><a href="/nqtTinTuc" class="hover:text-amber-500 transition-colors">Tin tức</a></li>
                        <li><a href="#" class="hover:text-amber-500 transition-colors">Tuyển dụng</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="font-semibold text-lg mb-4">Dịch vụ</h3>
                    <ul class="space-y-2 text-gray-400">
                        <li><a href="/nqtPhong" class="hover:text-amber-500 transition-colors">Phòng nghỉ</a></li>
                        <li><a href="/nqtDichVu" class="hover:text-amber-500 transition-colors">Dịch vụ</a></li>
                        <li><a href="/nqtDatPhong" class="hover:text-amber-500 transition-colors">Đặt phòng</a></li>
                        <li><a href="#" class="hover:text-amber-500 transition-colors">Spa & Wellness</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="font-semibold text-lg mb-4">Hỗ trợ</h3>
                    <ul class="space-y-2 text-gray-400">
                        <li th:if="${nqtWebsiteFAQ != null and nqtWebsiteFAQ != '' and nqtWebsiteFAQ != '#'}">
                            <a th:href="${nqtWebsiteFAQ}" class="hover:text-amber-500 transition-colors">Câu hỏi thường gặp</a>
                        </li>
                        <li th:each="link : ${nqtWebsiteSupportLinksList}">
                            <a th:href="${link[1]}" th:text="${link[0]}" class="hover:text-amber-500 transition-colors">Link</a>
                        </li>
                        <li th:if="${nqtWebsiteSupportLinksList == null or nqtWebsiteSupportLinksList.isEmpty()}">
                            <a href="#" class="hover:text-amber-500 transition-colors">Câu hỏi thường gặp</a>
                        </li>
                        <li th:if="${nqtWebsiteSupportLinksList == null or nqtWebsiteSupportLinksList.isEmpty()}">
                            <a href="#" class="hover:text-amber-500 transition-colors">Chính sách hủy</a>
                        </li>
                        <li th:if="${nqtWebsiteSupportLinksList == null or nqtWebsiteSupportLinksList.isEmpty()}">
                            <a href="#" class="hover:text-amber-500 transition-colors">Điều khoản sử dụng</a>
                        </li>
                        <li th:if="${nqtWebsiteSupportLinksList == null or nqtWebsiteSupportLinksList.isEmpty()}">
                            <a href="#" class="hover:text-amber-500 transition-colors">Bảo mật</a>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="border-t border-gray-800 pt-8 text-center text-gray-400">
                <p>&copy; <span th:text="${#dates.year(#dates.createNow())}">2024</span> <span th:text="${nqtWebsiteName ?: 'Hotel NQT'}">Hotel NQT</span>. All rights reserved. Developed by Nguyễn Quang Tâm - K23CNT1</p>
                <p class="mt-2"><span th:text="${nqtWebsiteAddress ?: '123 Đường ABC, Quận XYZ, Hà Nội, Việt Nam'}">123 Đường ABC, Quận XYZ, Hà Nội, Việt Nam</span> | Tel: <span th:text="${nqtWebsitePhone ?: '(84) 123-456-789'}">(84) 123-456-789</span> | Email: <span th:text="${nqtWebsiteEmail ?: 'contact@hotelnqt.com'}">contact@hotelnqt.com</span></p>
            </div>
        </div>
    </footer>

    <!-- GTranslate Float Widget -->
    <div class="gtranslate_wrapper"></div>
    <script>
        window.gtranslateSettings = {
            "default_language": "vi",
            "native_language_names": true,
            "detect_browser_language": true,
            "languages":["vi","en","zh-CN"],
            "wrapper_selector": ".gtranslate_wrapper",
            "flag_style": "3d"
        };
    </script>
    <script src="https://cdn.gtranslate.net/widgets/latest/float.js" defer></script>

    <!-- Zalo Chat Button -->
    <a th:with="phone=${#strings.replace(#strings.replace(nqtWebsitePhone ?: '0961138440', ' ', ''), '-', '')}"
       th:href="@{'https://chat.zalo.me/?phone=' + ${phone}}" 
       id="linkzalo" 
       target="_blank"
       rel="noopener noreferrer">
        <!-- <div id="fcta-zalo-tracking" class="fcta-zalo-mess">
            <span id="fcta-zalo-tracking">Chat hỗ trợ</span>
        </div> -->
        <div class="fcta-zalo-vi-tri-nut">
            <div id="fcta-zalo-tracking" class="fcta-zalo-nen-nut">
                <div id="fcta-zalo-tracking" class="fcta-zalo-ben-trong-nut">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 460.1 436.6">
                        <path fill="currentColor" class="st0"
                            d="M82.6 380.9c-1.8-.8-3.1-1.7-1-3.5 1.3-1 2.7-1.9 4.1-2.8 13.1-8.5 25.4-17.8 33.5-31.5 6.8-11.4 5.7-18.1-2.8-26.5C69 269.2 48.2 212.5 58.6 145.5 64.5 107.7 81.8 75 107 46.6c15.2-17.2 33.3-31.1 53.1-42.7 1.2-.7 2.9-.9 3.1-2.7-.4-1-1.1-.7-1.7-.7-33.7 0-67.4-.7-101 .2C28.3 1.7.5 26.6.6 62.3c.2 104.3 0 208.6 0 313 0 32.4 24.7 59.5 57 60.7 27.3 1.1 54.6.2 82 .1 2 .1 4 .2 6 .2H290c36 0 72 .2 108 0 33.4 0 60.5-27 60.5-60.3v-.6-58.5c0-1.4.5-2.9-.4-4.4-1.8.1-2.5 1.6-3.5 2.6-19.4 19.5-42.3 35.2-67.4 46.3-61.5 27.1-124.1 29-187.6 7.2-5.5-2-11.5-2.2-17.2-.8-8.4 2.1-16.7 4.6-25 7.1-24.4 7.6-49.3 11-74.8 6zm72.5-168.5c1.7-2.2 2.6-3.5 3.6-4.8 13.1-16.6 26.2-33.2 39.3-49.9 3.8-4.8 7.6-9.7 10-15.5 2.8-6.6-.2-12.8-7-15.2-3-.9-6.2-1.3-9.4-1.1-17.8-.1-35.7-.1-53.5 0-2.5 0-5 .3-7.4.9-5.6 1.4-9 7.1-7.6 12.8 1 3.8 4 6.8 7.8 7.7 2.4.6 4.9.9 7.4.8 10.8.1 21.7 0 32.5.1 1.2 0 2.7-.8 3.6 1-.9 1.2-1.8 2.4-2.7 3.5-15.5 19.6-30.9 39.3-46.4 58.9-3.8 4.9-5.8 10.3-3 16.3s8.5 7.1 14.3 7.5c4.6.3 9.3.1 14 .1 16.2 0 32.3.1 48.5-.1 8.6-.1 13.2-5.3 12.3-13.3-.7-6.3-5-9.6-13-9.7-14.1-.1-28.2 0-43.3 0zm116-52.6c-12.5-10.9-26.3-11.6-39.8-3.6-16.4 9.6-22.4 25.3-20.4 43.5 1.9 17 9.3 30.9 27.1 36.6 11.1 3.6 21.4 2.3 30.5-5.1 2.4-1.9 3.1-1.5 4.8.6 3.3 4.2 9 5.8 14 3.9 5-1.5 8.3-6.1 8.3-11.3.1-20 .2-40 0-60-.1-8-7.6-13.1-15.4-11.5-4.3.9-6.7 3.8-9.1 6.9zm69.3 37.1c-.4 25 20.3 43.9 46.3 41.3 23.9-2.4 39.4-20.3 38.6-45.6-.8-25-19.4-42.1-44.9-41.3-23.9.7-40.8 19.9-40 45.6zm-8.8-19.9c0-15.7.1-31.3 0-47 0-8-5.1-13-12.7-12.9-7.4.1-12.3 5.1-12.4 12.8-.1 4.7 0 9.3 0 14v79.5c0 6.2 3.8 11.6 8.8 12.9 6.9 1.9 14-2.2 15.8-9.1.3-1.2.5-2.4.4-3.7.2-15.5.1-31 .1-46.5z">
                        </path>
                    </svg>
                </div>
                <div id="fcta-zalo-tracking" class="fcta-zalo-text">Chat ngay</div>
            </div>
        </div>
    </a>

    <!-- Hotline Button - Đặt dưới nút Zalo -->
    <a th:with="phone=${#strings.replace(#strings.replace(nqtWebsitePhone ?: '0961138440', ' ', ''), '-', '')}"
       th:href="@{'tel:' + ${phone}}" 
       class="fcta-hotline"
       th:style="'background: linear-gradient(135deg, ' + ${nqtWebsiteColor ?: '#d97706'} + ' 0%, ' + ${#strings.replace(nqtWebsiteColor ?: '#d97706', '#', '')} + 'e6 100%); box-shadow: 0 4px 12px ' + ${#strings.replace(nqtWebsiteColor ?: '#d97706', '#', '')} + '66;'">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path>
        </svg>
        <span>Hotline: <span th:text="${nqtWebsitePhone ?: '0961138440'}">0961138440</span></span>
    </a>
    
    <!-- Register page specific scripts - always load, functions check if elements exist -->
    <script>
        console.log('Layout script loading...');
        // Password functions for register page
        if (typeof window.generateStrongPassword === 'undefined') {
            console.log('Defining generateStrongPassword function...');
            window.generateStrongPassword = function(event) {
                try {
                    const length = 16;
                    const uppercase = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
                    const lowercase = 'abcdefghijklmnopqrstuvwxyz';
                    const numbers = '0123456789';
                    const symbols = '!@#$%^&*()_+-=[]{}|;:,.<>?';
                    const allChars = uppercase + lowercase + numbers + symbols;
                    
                    let password = '';
                    password += uppercase[Math.floor(Math.random() * uppercase.length)];
                    password += lowercase[Math.floor(Math.random() * lowercase.length)];
                    password += numbers[Math.floor(Math.random() * numbers.length)];
                    password += symbols[Math.floor(Math.random() * symbols.length)];
                    
                    for (let i = password.length; i < length; i++) {
                        password += allChars[Math.floor(Math.random() * allChars.length)];
                    }
                    
                    password = password.split('').sort(() => Math.random() - 0.5).join('');
                    
                    const passwordInput = document.getElementById('nqtMatKhau');
                    const confirmInput = document.getElementById('nqtMatKhauXacNhan');
                    
                    if (passwordInput && confirmInput) {
                        passwordInput.value = password;
                        confirmInput.value = password;
                        passwordInput.dispatchEvent(new Event('input', { bubbles: true }));
                        confirmInput.dispatchEvent(new Event('input', { bubbles: true }));
                        
                        const button = event ? event.target.closest('button') : document.getElementById('btnGeneratePassword');
                        if (button) {
                            // Save original state
                            const originalText = button.innerHTML;
                            const originalStyle = button.getAttribute('style') || '';
                            
                            // Show success state
                            button.innerHTML = '<svg class="w-3 h-3 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>Đã tạo!';
                            
                            // Store original style in data attribute
                            button.setAttribute('data-original-style', originalStyle);
                            
                            // Apply success style
                            button.style.setProperty('background', '#10b981', 'important');
                            button.style.setProperty('background-color', '#10b981', 'important');
                            button.style.setProperty('color', 'white', 'important');
                            
                            // Restore original state after 2 seconds
                            setTimeout(() => {
                                // Restore original text
                                button.innerHTML = originalText;
                                
                                // Restore original style
                                const savedStyle = button.getAttribute('data-original-style');
                                if (savedStyle !== null && savedStyle !== '') {
                                    // Restore the original style attribute
                                    button.setAttribute('style', savedStyle);
                                } else if (savedStyle === '') {
                                    // If original style was empty, remove style attribute to let th:style work
                                    button.removeAttribute('style');
                                }
                                
                                // Clean up data attribute
                                button.removeAttribute('data-original-style');
                            }, 2000);
                        }
                    }
                } catch (error) {
                    console.error('Error generating password:', error);
                    alert('Có lỗi xảy ra khi tạo mật khẩu. Vui lòng thử lại.');
                }
            };
        }
        
        if (typeof window.togglePasswordVisibility === 'undefined') {
            console.log('Defining togglePasswordVisibility function...');
            window.togglePasswordVisibility = function(inputId, iconId) {
                try {
                    const input = document.getElementById(inputId);
                    const icon = document.getElementById(iconId);
                    
                    if (!input || !icon) return;
                    
                    if (input.type === 'password') {
                        input.type = 'text';
                        icon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"></path>';
                    } else {
                        input.type = 'password';
                        icon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>';
                    }
                } catch (error) {
                    console.error('Error toggling password visibility:', error);
                }
            };
        }
        
        // Initialize event listeners when DOM is ready
        function initRegisterPage() {
            console.log('Initializing register page...');
            const btnGeneratePassword = document.getElementById('btnGeneratePassword');
            const btnTogglePassword = document.getElementById('btnTogglePassword');
            const btnTogglePasswordConfirm = document.getElementById('btnTogglePasswordConfirm');
            
            console.log('Buttons found:', {
                btnGeneratePassword: !!btnGeneratePassword,
                btnTogglePassword: !!btnTogglePassword,
                btnTogglePasswordConfirm: !!btnTogglePasswordConfirm
            });
            
            if (btnGeneratePassword) {
                btnGeneratePassword.addEventListener('click', function(event) {
                    console.log('Generate password button clicked');
                    event.preventDefault();
                    event.stopPropagation();
                    if (window.generateStrongPassword) {
                        window.generateStrongPassword(event);
                    } else {
                        console.error('generateStrongPassword function not found!');
                    }
                });
            }
            
            if (btnTogglePassword) {
                btnTogglePassword.addEventListener('click', function(event) {
                    console.log('Toggle password button clicked');
                    event.preventDefault();
                    event.stopPropagation();
                    const inputId = btnTogglePassword.getAttribute('data-input-id');
                    const iconId = btnTogglePassword.getAttribute('data-icon-id');
                    if (window.togglePasswordVisibility) {
                        window.togglePasswordVisibility(inputId, iconId);
                    } else {
                        console.error('togglePasswordVisibility function not found!');
                    }
                });
            }
            
            if (btnTogglePasswordConfirm) {
                btnTogglePasswordConfirm.addEventListener('click', function(event) {
                    console.log('Toggle password confirm button clicked');
                    event.preventDefault();
                    event.stopPropagation();
                    const inputId = btnTogglePasswordConfirm.getAttribute('data-input-id');
                    const iconId = btnTogglePasswordConfirm.getAttribute('data-icon-id');
                    if (window.togglePasswordVisibility) {
                        window.togglePasswordVisibility(inputId, iconId);
                    } else {
                        console.error('togglePasswordVisibility function not found!');
                    }
                });
            }
        }
        
        // Run initialization
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initRegisterPage);
        } else {
            initRegisterPage();
        }
        
        console.log('Layout script loaded. Functions available:', {
            generateStrongPassword: typeof window.generateStrongPassword,
            togglePasswordVisibility: typeof window.togglePasswordVisibility
        });
    </script>
</body>
</html>

