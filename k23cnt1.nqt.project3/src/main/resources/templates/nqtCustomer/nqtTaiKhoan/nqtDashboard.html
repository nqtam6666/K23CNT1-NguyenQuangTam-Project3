<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org"
    th:replace="~{nqtCustomer/layout :: layout(title=${'Tài khoản của tôi - ' + (nqtWebsiteName != null ? nqtWebsiteName : 'Hotel NQT')}, description=${'Quản lý thông tin cá nhân - ' + (nqtWebsiteName != null ? nqtWebsiteName : 'Hotel NQT')})}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style th:inline="css">
        .glass-card { background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.3); }
        .gold-accent { 
            color: /*[[${nqtWebsiteColor ?: '#d97706'}]]*/ #d97706;
        }
        :root {
            --color-primary: /*[[${nqtWebsiteColor ?: '#d97706'}]]*/ #d97706;
        }
        .btn-primary {
            background: linear-gradient(to right, var(--color-primary), var(--color-primary)cc);
        }
    </style>
</head>
<body>
    <div th:fragment="content" class="pb-16">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-8">
                <h1 class="font-serif text-4xl font-bold text-gray-900 mb-4">Tài khoản <span class="gold-accent">của tôi</span></h1>
                <p class="text-gray-600">Quản lý thông tin cá nhân của bạn</p>
            </div>

            <!-- Navigation Tabs -->
            <div class="bg-gray-700 rounded-lg p-2 mb-6" style="display: block !important; visibility: visible !important;">
                <div class="flex flex-wrap gap-2">
                    <button type="button" onclick="window.showTab('profile')" id="tab-profile"
                        class="px-4 py-2 rounded-md font-medium transition-all bg-white text-gray-800 shadow-sm"
                        style="cursor: pointer !important; display: inline-block !important;">
                        THÔNG TIN CÁ NHÂN
                    </button>
                    <button type="button" onclick="window.showTab('password')" id="tab-password"
                        class="px-4 py-2 rounded-md font-medium transition-all text-white hover:bg-gray-600"
                        style="cursor: pointer !important; display: inline-block !important;">
                        ĐỔI MẬT KHẨU
                    </button>
                    <button type="button" onclick="window.showTab('security')" id="tab-security"
                        class="px-4 py-2 rounded-md font-medium transition-all text-white hover:bg-gray-600"
                        style="cursor: pointer !important; display: inline-block !important;">
                        BẢO MẬT
                    </button>
                </div>
            </div>

            <!-- Success/Error Messages -->
            <div th:if="${nqtError}" class="bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-4">
                <span th:text="${nqtError}">Error message</span>
            </div>
            <div th:if="${nqtSuccess}" class="bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg mb-4">
                <span th:text="${nqtSuccess}">Success message</span>
            </div>

            <div th:if="${nqtCustomerUser}" class="glass-card rounded-2xl p-8 md:p-12">
                <!-- Tab: THÔNG TIN CÁ NHÂN -->
                <form th:action="@{/nqtTaiKhoan/cap-nhat}" method="post" id="form-profile" class="tab-content" enctype="multipart/form-data">
                    <div class="space-y-6">
                        <!-- Avatar Upload -->
                        <div class="flex flex-col items-center">
                            <label class="block text-sm font-medium text-gray-700 mb-4">Ảnh đại diện</label>
                            <div class="relative">
                                <input type="file" id="nqtAvatar" name="nqtAvatar" accept="image/*"
                                       class="hidden"
                                       onchange="previewAvatar(this)">
                                <div id="avatarContainer" onclick="document.getElementById('nqtAvatar').click()" 
                                     class="rounded-full overflow-hidden border-4 border-gray-300 flex items-center justify-center bg-gray-100 user-avatar-bg cursor-pointer hover:border-amber-500 hover:shadow-2xl transition-all group relative mx-auto"
                                     style="width: 180px; height: 180px; display: flex;"
                                     th:style="${nqtCustomerUser.nqtAvatar != null and nqtCustomerUser.nqtAvatar != ''} ? 'width: 180px; height: 180px; display: flex;' : 'width: 180px; height: 180px; display: flex; background: linear-gradient(to right bottom, #d97706, #d97706cc);'">
                                    <img th:if="${nqtCustomerUser.nqtAvatar != null and nqtCustomerUser.nqtAvatar != ''}"
                                         th:src="${nqtCustomerUser.nqtAvatar}"
                                         alt="Avatar"
                                         class="w-full h-full object-cover">
                                    <span th:unless="${nqtCustomerUser.nqtAvatar != null and nqtCustomerUser.nqtAvatar != ''}"
                                          class="text-white font-semibold text-6xl"
                                          th:text="${#strings.substring(nqtCustomerUser.nqtHoVaTen, 0, 1)}">U</span>
                                    <!-- Overlay on hover -->
                                    <div class="absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all flex items-center justify-center">
                                        <svg class="w-12 h-12 text-white opacity-0 group-hover:opacity-100 transition-opacity" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"></path>
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                        </svg>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div>
                            <label for="nqtHoVaTen" class="block text-sm font-medium text-gray-700 mb-2">Họ và tên <span class="text-red-500">*</span></label>
                            <input type="text" id="nqtHoVaTen" name="nqtHoVaTen" th:value="${nqtCustomerUser.nqtHoVaTen}" required
                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500">
                        </div>

                        <div>
                            <label for="nqtEmail" class="block text-sm font-medium text-gray-700 mb-2">Email <span class="text-red-500">*</span></label>
                            <input type="email" id="nqtEmail" name="nqtEmail" th:value="${nqtCustomerUser.nqtEmail}" required
                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500">
                        </div>

                        <div>
                            <label for="nqtSoDienThoai" class="block text-sm font-medium text-gray-700 mb-2">Số điện thoại</label>
                            <input type="tel" id="nqtSoDienThoai" name="nqtSoDienThoai" th:value="${nqtCustomerUser.nqtSoDienThoai}"
                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500">
                        </div>

                        <div>
                            <label for="nqtDiaChi" class="block text-sm font-medium text-gray-700 mb-2">Địa chỉ</label>
                            <input type="text" id="nqtDiaChi" name="nqtDiaChi" th:value="${nqtCustomerUser.nqtDiaChi}"
                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500">
                        </div>

                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Cấp bậc</label>
                            <div class="w-full px-4 py-3 border border-gray-300 rounded-lg bg-gray-50 flex items-center">
                                <span th:if="${nqtCustomerUser.nqtCapBac == 'KhachVip'}"
                                    class="px-3 py-1 inline-flex items-center text-sm leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800">
                                    <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path>
                                    </svg>
                                    Khách VIP
                                </span>
                                <span th:if="${nqtCustomerUser.nqtCapBac == null or nqtCustomerUser.nqtCapBac == 'KhachThuong'}"
                                    class="px-3 py-1 inline-flex text-sm leading-5 font-semibold rounded-full bg-gray-100 text-gray-800">
                                    Khách thường
                                </span>
                            </div>
                            <!-- <p class="mt-1 text-xs text-gray-500">Cấp bậc được quản lý bởi hệ thống, không thể thay đổi tại đây.</p> -->
                        </div>

                        <div class="pt-4 border-t" style="display: block !important; visibility: visible !important;">
                            <button type="submit" id="btn-update-profile"
                                class="w-full text-white py-3 rounded-lg font-semibold hover:shadow-lg transition-all hover:scale-105 btn-primary"
                                style="background: linear-gradient(to right, #d97706, rgba(217, 119, 6, 0.8)) !important; background-color: #d97706 !important; cursor: pointer !important; position: relative !important; z-index: 10 !important; display: block !important; visibility: visible !important; opacity: 1 !important; color: white !important; border: none !important;">
                                Cập nhật thông tin
                            </button>
                        </div>
                    </div>
                </form>

                <!-- Tab: ĐỔI MẬT KHẨU -->
                <form th:action="@{/nqtTaiKhoan/cap-nhat}" method="post" id="form-password" class="tab-content hidden">
                    <div class="space-y-6">
                        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4">
                            <p class="text-sm text-blue-800 flex items-start">
                                <svg class="w-5 h-5 mr-2 flex-shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                                    <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                                </svg>
                                <span th:if="${nqtCustomerUser.nqtMatKhau == null or nqtCustomerUser.nqtMatKhau.isEmpty()}">
                                    Tài khoản của bạn được đăng ký qua Google/Facebook. Bạn có thể đặt mật khẩu mới để đăng nhập bằng tài khoản và mật khẩu.
                                </span>
                                <span th:unless="${nqtCustomerUser.nqtMatKhau == null or nqtCustomerUser.nqtMatKhau.isEmpty()}">
                                    Nhập mật khẩu cũ và mật khẩu mới để thay đổi. Để trống nếu không muốn đổi.
                                </span>
                            </p>
                        </div>

                        <div th:if="${nqtCustomerUser.nqtMatKhau != null and !nqtCustomerUser.nqtMatKhau.isEmpty()}">
                            <label for="nqtMatKhauCu2" class="block text-sm font-medium text-gray-700 mb-2">Mật khẩu hiện tại <span class="text-red-500">*</span></label>
                            <input type="password" id="nqtMatKhauCu2" name="nqtMatKhauCu"
                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500">
                        </div>

                        <div>
                            <label for="nqtMatKhauMoi2" class="block text-sm font-medium text-gray-700 mb-2">Mật khẩu mới <span class="text-red-500">*</span></label>
                            <input type="password" id="nqtMatKhauMoi2" name="nqtMatKhauMoi"
                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500">
                            <p class="mt-1 text-xs text-gray-500">Mật khẩu phải có ít nhất 6 ký tự</p>
                        </div>

                        <div>
                            <label for="nqtMatKhauMoiXacNhan2" class="block text-sm font-medium text-gray-700 mb-2">Xác nhận mật khẩu mới <span class="text-red-500">*</span></label>
                            <input type="password" id="nqtMatKhauMoiXacNhan2" name="nqtMatKhauMoiXacNhan"
                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500">
                        </div>

                        <!-- Hidden fields for profile update -->
                        <input type="hidden" name="nqtHoVaTen" th:value="${nqtCustomerUser.nqtHoVaTen}">
                        <input type="hidden" name="nqtEmail" th:value="${nqtCustomerUser.nqtEmail}">
                        <input type="hidden" name="nqtSoDienThoai" th:value="${nqtCustomerUser.nqtSoDienThoai}">
                        <input type="hidden" name="nqtDiaChi" th:value="${nqtCustomerUser.nqtDiaChi}">

                        <div class="pt-4 border-t" style="display: block !important; visibility: visible !important;">
                            <button type="submit" id="btn-change-password"
                                class="w-full text-white py-3 rounded-lg font-semibold hover:shadow-lg transition-all hover:scale-105 btn-primary"
                                style="background: linear-gradient(to right, #d97706, rgba(217, 119, 6, 0.8)) !important; background-color: #d97706 !important; cursor: pointer !important; position: relative !important; z-index: 10 !important; display: block !important; visibility: visible !important; opacity: 1 !important; color: white !important; border: none !important;">
                                Đổi mật khẩu
                            </button>
                        </div>
                    </div>
                </form>

                <!-- Tab: BẢO MẬT -->
                <div id="content-security" class="tab-content hidden">
                    <div class="space-y-6">
                        <div class="bg-gray-50 rounded-lg p-6">
                            <div class="flex items-center justify-between mb-4">
                                <div class="flex-1">
                                    <h3 class="font-semibold text-gray-900 mb-2">Xác thực 2 yếu tố (2FA)</h3>
                                    <p class="text-sm text-gray-600 flex items-center">
                                        <span th:if="${nqtCustomerUser.nqt2faEnabled != null and nqtCustomerUser.nqt2faEnabled}" class="flex items-center">
                                            <svg class="w-5 h-5 text-green-600 mr-1" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                                                <path fill-rule="evenodd" d="M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                                            </svg>
                                            Đã bật - Tài khoản của bạn được bảo vệ bằng 2FA
                                        </span>
                                        <span th:unless="${nqtCustomerUser.nqt2faEnabled != null and nqtCustomerUser.nqt2faEnabled}" class="flex items-center">
                                            <svg class="w-5 h-5 text-gray-400 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                            </svg>
                                            Chưa bật - Bảo vệ tài khoản bằng mã xác thực từ ứng dụng
                                        </span>
                                    </p>
                                </div>
                                <a th:href="@{/nqtTaiKhoan/setup-2fa}"
                                    class="px-6 py-3 rounded-xl font-bold text-base transition-all duration-300 whitespace-nowrap flex items-center space-x-2 shadow-lg hover:shadow-2xl transform hover:scale-105 active:scale-95 border-2"
                                    th:class="${nqtCustomerUser.nqt2faEnabled != null and nqtCustomerUser.nqt2faEnabled} ? 
                                        'bg-gradient-to-r from-amber-500 to-orange-600 text-white hover:from-amber-600 hover:to-orange-700 border-amber-600' : 
                                        'bg-gradient-to-r from-blue-600 to-indigo-700 text-white hover:from-blue-700 hover:to-indigo-800 border-blue-700'">
                                    <svg th:if="${nqtCustomerUser.nqt2faEnabled != null and nqtCustomerUser.nqt2faEnabled}" class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                                        <path fill-rule="evenodd" d="M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
                                    </svg>
                                    <svg th:unless="${nqtCustomerUser.nqt2faEnabled != null and nqtCustomerUser.nqt2faEnabled}" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path>
                                    </svg>
                                    <span th:text="${nqtCustomerUser.nqt2faEnabled != null and nqtCustomerUser.nqt2faEnabled} ? 'Quản lý 2FA' : 'Bật 2FA'">Bật 2FA</span>
                                </a>
                            </div>
                            <div class="mt-4 pt-4 border-t border-gray-200">
                                <p class="text-xs text-gray-500">
                                    <strong>2FA là gì?</strong> Xác thực 2 yếu tố giúp bảo vệ tài khoản của bạn bằng cách yêu cầu mã xác thực từ ứng dụng trên điện thoại khi đăng nhập.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <script>
            // Function to apply button colors
            function applyButtonColors() {
                const primaryColor = /*[[${nqtWebsiteColor ?: '#d97706'}]]*/ '#d97706';
                const primaryColorRgb = hexToRgb(primaryColor);
                const primaryColorDark = 'rgba(' + primaryColorRgb + ', 0.8)';
                const gradient = 'linear-gradient(to right, ' + primaryColor + ', ' + primaryColorDark + ')';
                
                // Apply to all buttons with class btn-primary
                document.querySelectorAll('.btn-primary').forEach(function(btn) {
                    btn.style.setProperty('background', gradient, 'important');
                    btn.style.setProperty('background-color', primaryColor, 'important');
                    btn.style.setProperty('color', 'white', 'important');
                    btn.style.setProperty('cursor', 'pointer', 'important');
                    btn.style.setProperty('position', 'relative', 'important');
                    btn.style.setProperty('z-index', '10', 'important');
                    btn.style.setProperty('display', 'block', 'important');
                    btn.style.setProperty('visibility', 'visible', 'important');
                    btn.style.setProperty('opacity', '1', 'important');
                    btn.style.setProperty('border', 'none', 'important');
                });
            }
            
            // Tab navigation - must be in global scope
            window.showTab = function(tabName) {
                
                // Hide all tab contents
                document.querySelectorAll('.tab-content').forEach(content => {
                    content.classList.add('hidden');
                    content.style.display = 'none';
                });
                
                // Remove active state from all tabs
                document.querySelectorAll('[id^="tab-"]').forEach(tab => {
                    tab.classList.remove('bg-white', 'text-gray-800', 'shadow-sm');
                    tab.classList.add('text-white', 'hover:bg-gray-600');
                });
                
                // Show selected tab content
                if (tabName === 'profile') {
                    const formProfile = document.getElementById('form-profile');
                    if (formProfile) {
                        formProfile.classList.remove('hidden');
                        formProfile.style.display = 'block';
                    }
                } else if (tabName === 'password') {
                    const formPassword = document.getElementById('form-password');
                    if (formPassword) {
                        formPassword.classList.remove('hidden');
                        formPassword.style.display = 'block';
                    }
                } else if (tabName === 'security') {
                    const contentSecurity = document.getElementById('content-security');
                    if (contentSecurity) {
                        contentSecurity.classList.remove('hidden');
                        contentSecurity.style.display = 'block';
                    }
                }
                
                // Add active state to selected tab
                const activeTab = document.getElementById('tab-' + tabName);
                if (activeTab) {
                    activeTab.classList.remove('text-white', 'hover:bg-gray-600');
                    activeTab.classList.add('bg-white', 'text-gray-800', 'shadow-sm');
                }
                
                // Re-apply button colors after tab switch
                setTimeout(applyButtonColors, 50);
            };
            
            // Helper function to convert hex to RGB
            function hexToRgb(hex) {
                // Remove # if present
                hex = hex.replace('#', '');
                
                // Parse hex to RGB
                const r = parseInt(hex.substring(0, 2), 16);
                const g = parseInt(hex.substring(2, 4), 16);
                const b = parseInt(hex.substring(4, 6), 16);
                
                return r + ', ' + g + ', ' + b;
            }
            
            // Initialize: show profile tab by default
            function initTabs() {
                
                // Ensure showTab is available
                if (typeof window.showTab === 'function') {
                    window.showTab('profile');
                } else {
                    console.error('showTab function not found!');
                }
                
                // Apply button colors
                applyButtonColors();
                
                // Ensure tab navigation is visible
                const tabNav = document.querySelector('.bg-gray-700.rounded-lg');
                if (tabNav) {
                    tabNav.style.display = 'block';
                    tabNav.style.visibility = 'visible';
                }
                
                // Re-apply colors after a short delay to ensure DOM is ready
                setTimeout(applyButtonColors, 100);
                setTimeout(applyButtonColors, 500);
            }
            
            // Run on DOM ready
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', initTabs);
            } else {
                initTabs();
            }

            // Avatar preview function
            function previewAvatar(input) {
                if (input.files && input.files[0]) {
                    // Validate file size
                    if (input.files[0].size > 5 * 1024 * 1024) {
                        alert('Kích thước ảnh không được vượt quá 5MB!');
                        input.value = '';
                        return;
                    }
                    
                    // Validate file type
                    const fileType = input.files[0].type;
                    if (!fileType.startsWith('image/')) {
                        alert('Chỉ chấp nhận file ảnh (JPG, PNG, GIF)!');
                        input.value = '';
                        return;
                    }
                    
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        // Find the avatar container by ID
                        const avatarContainer = document.getElementById('avatarContainer');
                        if (avatarContainer) {
                            // Remove existing content
                            const existingImg = avatarContainer.querySelector('img');
                            const existingSpan = avatarContainer.querySelector('span');
                            if (existingImg) existingImg.remove();
                            if (existingSpan) existingSpan.remove();
                            
                            // Add new image
                            const newImg = document.createElement('img');
                            newImg.src = e.target.result;
                            newImg.alt = 'Avatar Preview';
                            newImg.className = 'w-full h-full object-cover';
                            avatarContainer.appendChild(newImg);
                            
                            // Remove background gradient if exists
                            avatarContainer.style.background = '';
                            avatarContainer.style.backgroundImage = '';
                            
                            console.log('Avatar preview updated successfully');
                        } else {
                            console.error('Avatar container not found');
                        }
                    };
                    reader.onerror = function() {
                        alert('Lỗi khi đọc file ảnh!');
                        input.value = '';
                    };
                    reader.readAsDataURL(input.files[0]);
                } else {
                    console.log('No file selected');
                }
            }
        </script>
    </div>
</body>
</html>

